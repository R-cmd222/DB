INFO:     Started server process [41512]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:9527 (Press CTRL+C to quit)
INFO:     127.0.0.1:60404 - "OPTIONS /login HTTP/1.1" 200 OK
2025-06-25 12:42:27,080 INFO sqlalchemy.engine.Engine SELECT CAST(SERVERPROPERTY('ProductVersion') AS VARCHAR)
INFO:sqlalchemy.engine.Engine:SELECT CAST(SERVERPROPERTY('ProductVersion') AS VARCHAR)
2025-06-25 12:42:27,080 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-06-25 12:42:27,084 INFO sqlalchemy.engine.Engine SELECT schema_name()
INFO:sqlalchemy.engine.Engine:SELECT schema_name()
2025-06-25 12:42:27,084 INFO sqlalchemy.engine.Engine [generated in 0.00033s] ()
INFO:sqlalchemy.engine.Engine:[generated in 0.00033s] ()
2025-06-25 12:42:27,101 INFO sqlalchemy.engine.Engine SELECT CAST('test max support' AS NVARCHAR(max))
INFO:sqlalchemy.engine.Engine:SELECT CAST('test max support' AS NVARCHAR(max))
2025-06-25 12:42:27,101 INFO sqlalchemy.engine.Engine [generated in 0.00057s] ()
INFO:sqlalchemy.engine.Engine:[generated in 0.00057s] ()
2025-06-25 12:42:27,101 INFO sqlalchemy.engine.Engine SELECT 1 FROM fn_listextendedproperty(default, default, default, default, default, default, default)
INFO:sqlalchemy.engine.Engine:SELECT 1 FROM fn_listextendedproperty(default, default, default, default, default, default, default)
2025-06-25 12:42:27,101 INFO sqlalchemy.engine.Engine [generated in 0.00033s] ()
INFO:sqlalchemy.engine.Engine:[generated in 0.00033s] ()
2025-06-25 12:42:27,159 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 12:42:27,163 INFO sqlalchemy.engine.Engine SELECT TOP 1 [Employees].[EmployeeID] AS [Employees_EmployeeID], [Employees].[Name] AS [Employees_Name], [Employees].[Gender] AS [Employees_Gender], [Employees].[BirthDate] AS [Employees_BirthDate], [Employees].[Position] AS [Employees_Position], [Employees].[Phone] AS [Employees_Phone], [Employees].username AS [Employees_username], [Employees].password AS [Employees_password], [Employees].role AS [Employees_role] 
FROM [Employees] 
WHERE [Employees].username = ?
INFO:sqlalchemy.engine.Engine:SELECT TOP 1 [Employees].[EmployeeID] AS [Employees_EmployeeID], [Employees].[Name] AS [Employees_Name], [Employees].[Gender] AS [Employees_Gender], [Employees].[BirthDate] AS [Employees_BirthDate], [Employees].[Position] AS [Employees_Position], [Employees].[Phone] AS [Employees_Phone], [Employees].username AS [Employees_username], [Employees].password AS [Employees_password], [Employees].role AS [Employees_role] 
FROM [Employees] 
WHERE [Employees].username = ?
2025-06-25 12:42:27,163 INFO sqlalchemy.engine.Engine [generated in 0.00059s] ('admin1',)
INFO:sqlalchemy.engine.Engine:[generated in 0.00059s] ('admin1',)
INFO:     127.0.0.1:60404 - "POST /login HTTP/1.1" 200 OK
2025-06-25 12:42:27,167 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:     127.0.0.1:60404 - "OPTIONS /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:60405 - "OPTIONS /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:60405 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:60404 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:60404 - "OPTIONS /stats HTTP/1.1" 200 OK
INFO:     127.0.0.1:60405 - "OPTIONS /stats HTTP/1.1" 200 OK
2025-06-25 12:42:27,297 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 12:42:27,301 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products]) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products]) AS anon_1
2025-06-25 12:42:27,301 INFO sqlalchemy.engine.Engine [generated in 0.00051s] ()
INFO:sqlalchemy.engine.Engine:[generated in 0.00051s] ()
2025-06-25 12:42:27,311 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills]) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills]) AS anon_1
2025-06-25 12:42:27,311 INFO sqlalchemy.engine.Engine [generated in 0.00047s] ()
INFO:sqlalchemy.engine.Engine:[generated in 0.00047s] ()
2025-06-25 12:42:27,317 INFO sqlalchemy.engine.Engine SELECT sum([Products].[Stock]) AS sum_1 
FROM [Products]
INFO:sqlalchemy.engine.Engine:SELECT sum([Products].[Stock]) AS sum_1 
FROM [Products]
2025-06-25 12:42:27,317 INFO sqlalchemy.engine.Engine [generated in 0.00068s] ()
INFO:sqlalchemy.engine.Engine:[generated in 0.00068s] ()
2025-06-25 12:42:27,317 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products] 
WHERE [Products].[Stock] < ?) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products] 
WHERE [Products].[Stock] < ?) AS anon_1
2025-06-25 12:42:27,317 INFO sqlalchemy.engine.Engine [generated in 0.00045s] (10,)
INFO:sqlalchemy.engine.Engine:[generated in 0.00045s] (10,)
INFO:     127.0.0.1:60405 - "GET /stats HTTP/1.1" 200 OK
2025-06-25 12:42:27,326 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
2025-06-25 12:42:27,330 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 12:42:27,330 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products]) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products]) AS anon_1
2025-06-25 12:42:27,334 INFO sqlalchemy.engine.Engine [cached since 0.03162s ago] ()
INFO:sqlalchemy.engine.Engine:[cached since 0.03162s ago] ()
INFO:     127.0.0.1:60405 - "OPTIONS /dashboard/sales HTTP/1.1" 200 OK
2025-06-25 12:42:27,334 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills]) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills]) AS anon_1
2025-06-25 12:42:27,334 INFO sqlalchemy.engine.Engine [cached since 0.02727s ago] ()
INFO:sqlalchemy.engine.Engine:[cached since 0.02727s ago] ()
2025-06-25 12:42:27,338 INFO sqlalchemy.engine.Engine SELECT sum([Products].[Stock]) AS sum_1 
FROM [Products]
INFO:sqlalchemy.engine.Engine:SELECT sum([Products].[Stock]) AS sum_1 
FROM [Products]
2025-06-25 12:42:27,338 INFO sqlalchemy.engine.Engine [cached since 0.02474s ago] ()
INFO:sqlalchemy.engine.Engine:[cached since 0.02474s ago] ()
2025-06-25 12:42:27,343 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products] 
WHERE [Products].[Stock] < ?) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products] 
WHERE [Products].[Stock] < ?) AS anon_1
2025-06-25 12:42:27,343 INFO sqlalchemy.engine.Engine [cached since 0.02154s ago] (10,)
INFO:sqlalchemy.engine.Engine:[cached since 0.02154s ago] (10,)
2025-06-25 12:42:27,343 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 12:42:27,343 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:     127.0.0.1:60404 - "GET /stats HTTP/1.1" 200 OK
2025-06-25 12:42:27,343 INFO sqlalchemy.engine.Engine [generated in 0.00114s] (datetime.datetime(2025, 6, 25, 0, 0), '已结账')
INFO:sqlalchemy.engine.Engine:[generated in 0.00114s] (datetime.datetime(2025, 6, 25, 0, 0), '已结账')
2025-06-25 12:42:27,343 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
2025-06-25 12:42:27,359 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
2025-06-25 12:42:27,359 INFO sqlalchemy.engine.Engine [cached since 0.01026s ago] (datetime.datetime(2025, 6, 23, 0, 0), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 0.01026s ago] (datetime.datetime(2025, 6, 23, 0, 0), '已结账')
2025-06-25 12:42:27,366 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ?
2025-06-25 12:42:27,366 INFO sqlalchemy.engine.Engine [generated in 0.00051s] (datetime.datetime(2025, 6, 16, 0, 0), datetime.datetime(2025, 6, 22, 23, 59, 59), '已结账')
INFO:sqlalchemy.engine.Engine:[generated in 0.00051s] (datetime.datetime(2025, 6, 16, 0, 0), datetime.datetime(2025, 6, 22, 23, 59, 59), '已结账')
2025-06-25 12:42:27,367 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
2025-06-25 12:42:27,367 INFO sqlalchemy.engine.Engine [cached since 0.02222s ago] (datetime.datetime(2025, 6, 1, 0, 0), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 0.02222s ago] (datetime.datetime(2025, 6, 1, 0, 0), '已结账')
INFO:     127.0.0.1:60405 - "GET /dashboard/sales HTTP/1.1" 200 OK
2025-06-25 12:42:27,367 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
2025-06-25 12:42:27,380 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 12:42:27,381 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
2025-06-25 12:42:27,381 INFO sqlalchemy.engine.Engine [cached since 0.03155s ago] (datetime.datetime(2025, 6, 25, 0, 0), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 0.03155s ago] (datetime.datetime(2025, 6, 25, 0, 0), '已结账')
INFO:     127.0.0.1:60405 - "OPTIONS /dashboard/top-products?limit=5 HTTP/1.1" 200 OK
2025-06-25 12:42:27,387 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
2025-06-25 12:42:27,389 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 12:42:27,389 INFO sqlalchemy.engine.Engine [cached since 0.03975s ago] (datetime.datetime(2025, 6, 23, 0, 0), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 0.03975s ago] (datetime.datetime(2025, 6, 23, 0, 0), '已结账')
2025-06-25 12:42:27,392 INFO sqlalchemy.engine.Engine SELECT TOP 5 [Products].[Name] AS [Products_Name], sum([BillItems].[Quantity]) AS sales 
FROM [Products] JOIN [BillItems] ON [BillItems].[ProductID] = [Products].[ProductID] JOIN [Bills] ON [Bills].[BillID] = [BillItems].[BillID] 
WHERE [Bills].[Status] = ? GROUP BY [Products].[Name] ORDER BY sum([BillItems].[Quantity]) DESC
INFO:sqlalchemy.engine.Engine:SELECT TOP 5 [Products].[Name] AS [Products_Name], sum([BillItems].[Quantity]) AS sales 
FROM [Products] JOIN [BillItems] ON [BillItems].[ProductID] = [Products].[ProductID] JOIN [Bills] ON [Bills].[BillID] = [BillItems].[BillID] 
WHERE [Bills].[Status] = ? GROUP BY [Products].[Name] ORDER BY sum([BillItems].[Quantity]) DESC
2025-06-25 12:42:27,393 INFO sqlalchemy.engine.Engine [generated in 0.00081s] ('已结账',)
INFO:sqlalchemy.engine.Engine:[generated in 0.00081s] ('已结账',)
2025-06-25 12:42:27,397 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ?
2025-06-25 12:42:27,397 INFO sqlalchemy.engine.Engine [cached since 0.03234s ago] (datetime.datetime(2025, 6, 16, 0, 0), datetime.datetime(2025, 6, 22, 23, 59, 59), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 0.03234s ago] (datetime.datetime(2025, 6, 16, 0, 0), datetime.datetime(2025, 6, 22, 23, 59, 59), '已结账')
INFO:     127.0.0.1:60405 - "GET /dashboard/top-products?limit=5 HTTP/1.1" 200 OK
2025-06-25 12:42:27,397 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
2025-06-25 12:42:27,397 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
2025-06-25 12:42:27,397 INFO sqlalchemy.engine.Engine [cached since 0.05346s ago] (datetime.datetime(2025, 6, 1, 0, 0), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 0.05346s ago] (datetime.datetime(2025, 6, 1, 0, 0), '已结账')
INFO:     127.0.0.1:60404 - "GET /dashboard/sales HTTP/1.1" 200 OK
2025-06-25 12:42:27,397 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
2025-06-25 12:42:27,435 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 12:42:27,435 INFO sqlalchemy.engine.Engine SELECT TOP 5 [Products].[Name] AS [Products_Name], sum([BillItems].[Quantity]) AS sales 
FROM [Products] JOIN [BillItems] ON [BillItems].[ProductID] = [Products].[ProductID] JOIN [Bills] ON [Bills].[BillID] = [BillItems].[BillID] 
WHERE [Bills].[Status] = ? GROUP BY [Products].[Name] ORDER BY sum([BillItems].[Quantity]) DESC
INFO:sqlalchemy.engine.Engine:SELECT TOP 5 [Products].[Name] AS [Products_Name], sum([BillItems].[Quantity]) AS sales 
FROM [Products] JOIN [BillItems] ON [BillItems].[ProductID] = [Products].[ProductID] JOIN [Bills] ON [Bills].[BillID] = [BillItems].[BillID] 
WHERE [Bills].[Status] = ? GROUP BY [Products].[Name] ORDER BY sum([BillItems].[Quantity]) DESC
2025-06-25 12:42:27,435 INFO sqlalchemy.engine.Engine [cached since 0.04811s ago] ('已结账',)
INFO:sqlalchemy.engine.Engine:[cached since 0.04811s ago] ('已结账',)
INFO:     127.0.0.1:60404 - "GET /dashboard/top-products?limit=5 HTTP/1.1" 200 OK
2025-06-25 12:42:27,442 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:     127.0.0.1:60404 - "OPTIONS /guests HTTP/1.1" 200 OK
2025-06-25 12:42:28,858 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 12:42:28,860 INFO sqlalchemy.engine.Engine SELECT [Guests].[GuestID] AS [Guests_GuestID], [Guests].[Name] AS [Guests_Name], [Guests].[Level] AS [Guests_Level], [Guests].[Points] AS [Guests_Points], [Guests].[Phone] AS [Guests_Phone] 
FROM [Guests]
INFO:sqlalchemy.engine.Engine:SELECT [Guests].[GuestID] AS [Guests_GuestID], [Guests].[Name] AS [Guests_Name], [Guests].[Level] AS [Guests_Level], [Guests].[Points] AS [Guests_Points], [Guests].[Phone] AS [Guests_Phone] 
FROM [Guests]
2025-06-25 12:42:28,860 INFO sqlalchemy.engine.Engine [generated in 0.00036s] ()
INFO:sqlalchemy.engine.Engine:[generated in 0.00036s] ()
2025-06-25 12:42:28,866 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
2025-06-25 12:42:28,867 INFO sqlalchemy.engine.Engine [generated in 0.00040s] (1,)
INFO:sqlalchemy.engine.Engine:[generated in 0.00040s] (1,)
2025-06-25 12:42:28,870 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
2025-06-25 12:42:28,870 INFO sqlalchemy.engine.Engine [cached since 0.004214s ago] (2,)
INFO:sqlalchemy.engine.Engine:[cached since 0.004214s ago] (2,)
2025-06-25 12:42:28,872 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
2025-06-25 12:42:28,872 INFO sqlalchemy.engine.Engine [cached since 0.005998s ago] (3,)
INFO:sqlalchemy.engine.Engine:[cached since 0.005998s ago] (3,)
2025-06-25 12:42:28,873 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
2025-06-25 12:42:28,873 INFO sqlalchemy.engine.Engine [cached since 0.007696s ago] (4,)
INFO:sqlalchemy.engine.Engine:[cached since 0.007696s ago] (4,)
2025-06-25 12:42:28,874 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
2025-06-25 12:42:28,876 INFO sqlalchemy.engine.Engine [cached since 0.009633s ago] (5,)
INFO:sqlalchemy.engine.Engine:[cached since 0.009633s ago] (5,)
2025-06-25 12:42:28,876 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
2025-06-25 12:42:28,876 INFO sqlalchemy.engine.Engine [cached since 0.01137s ago] (6,)
INFO:sqlalchemy.engine.Engine:[cached since 0.01137s ago] (6,)
2025-06-25 12:42:28,876 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
2025-06-25 12:42:28,876 INFO sqlalchemy.engine.Engine [cached since 0.01292s ago] (8,)
INFO:sqlalchemy.engine.Engine:[cached since 0.01292s ago] (8,)
2025-06-25 12:42:28,880 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
2025-06-25 12:42:28,880 INFO sqlalchemy.engine.Engine [cached since 0.01455s ago] (13,)
INFO:sqlalchemy.engine.Engine:[cached since 0.01455s ago] (13,)
2025-06-25 12:42:28,880 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
2025-06-25 12:42:28,880 INFO sqlalchemy.engine.Engine [cached since 0.01615s ago] (14,)
INFO:sqlalchemy.engine.Engine:[cached since 0.01615s ago] (14,)
INFO:     127.0.0.1:60404 - "GET /guests HTTP/1.1" 200 OK
2025-06-25 12:42:28,885 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:     127.0.0.1:60404 - "OPTIONS /report/sales?start=2025-05-26&end=2025-06-25&unit=day HTTP/1.1" 200 OK
2025-06-25 12:42:29,364 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 12:42:29,366 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ?
2025-06-25 12:42:29,366 INFO sqlalchemy.engine.Engine [generated in 0.00041s] (datetime.datetime(2025, 5, 26, 0, 0), datetime.datetime(2025, 6, 25, 23, 59, 59), '已结账')
INFO:sqlalchemy.engine.Engine:[generated in 0.00041s] (datetime.datetime(2025, 5, 26, 0, 0), datetime.datetime(2025, 6, 25, 23, 59, 59), '已结账')
2025-06-25 12:42:29,373 INFO sqlalchemy.engine.Engine SELECT TOP 10 [Products].[Name] AS [Products_Name], sum([BillItems].[Quantity]) AS sales, sum([BillItems].[Price] * [BillItems].[Quantity]) AS revenue 
FROM [Products] JOIN [BillItems] ON [BillItems].[ProductID] = [Products].[ProductID] JOIN [Bills] ON [Bills].[BillID] = [BillItems].[BillID] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ? GROUP BY [Products].[Name] ORDER BY sum([BillItems].[Quantity]) DESC
INFO:sqlalchemy.engine.Engine:SELECT TOP 10 [Products].[Name] AS [Products_Name], sum([BillItems].[Quantity]) AS sales, sum([BillItems].[Price] * [BillItems].[Quantity]) AS revenue 
FROM [Products] JOIN [BillItems] ON [BillItems].[ProductID] = [Products].[ProductID] JOIN [Bills] ON [Bills].[BillID] = [BillItems].[BillID] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ? GROUP BY [Products].[Name] ORDER BY sum([BillItems].[Quantity]) DESC
2025-06-25 12:42:29,373 INFO sqlalchemy.engine.Engine [generated in 0.00047s] (datetime.datetime(2025, 5, 26, 0, 0), datetime.datetime(2025, 6, 25, 23, 59, 59), '已结账')
INFO:sqlalchemy.engine.Engine:[generated in 0.00047s] (datetime.datetime(2025, 5, 26, 0, 0), datetime.datetime(2025, 6, 25, 23, 59, 59), '已结账')
INFO:     127.0.0.1:60404 - "GET /report/sales?start=2025-05-26&end=2025-06-25&unit=day HTTP/1.1" 200 OK
2025-06-25 12:42:29,381 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
2025-06-25 12:42:30,575 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 12:42:30,575 INFO sqlalchemy.engine.Engine SELECT [Guests].[GuestID] AS [Guests_GuestID], [Guests].[Name] AS [Guests_Name], [Guests].[Level] AS [Guests_Level], [Guests].[Points] AS [Guests_Points], [Guests].[Phone] AS [Guests_Phone] 
FROM [Guests]
INFO:sqlalchemy.engine.Engine:SELECT [Guests].[GuestID] AS [Guests_GuestID], [Guests].[Name] AS [Guests_Name], [Guests].[Level] AS [Guests_Level], [Guests].[Points] AS [Guests_Points], [Guests].[Phone] AS [Guests_Phone] 
FROM [Guests]
2025-06-25 12:42:30,576 INFO sqlalchemy.engine.Engine [cached since 1.716s ago] ()
INFO:sqlalchemy.engine.Engine:[cached since 1.716s ago] ()
2025-06-25 12:42:30,577 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
2025-06-25 12:42:30,578 INFO sqlalchemy.engine.Engine [cached since 1.712s ago] (1,)
INFO:sqlalchemy.engine.Engine:[cached since 1.712s ago] (1,)
2025-06-25 12:42:30,579 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
2025-06-25 12:42:30,579 INFO sqlalchemy.engine.Engine [cached since 1.713s ago] (2,)
INFO:sqlalchemy.engine.Engine:[cached since 1.713s ago] (2,)
2025-06-25 12:42:30,581 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
2025-06-25 12:42:30,581 INFO sqlalchemy.engine.Engine [cached since 1.715s ago] (3,)
INFO:sqlalchemy.engine.Engine:[cached since 1.715s ago] (3,)
2025-06-25 12:42:30,583 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
2025-06-25 12:42:30,583 INFO sqlalchemy.engine.Engine [cached since 1.717s ago] (4,)
INFO:sqlalchemy.engine.Engine:[cached since 1.717s ago] (4,)
2025-06-25 12:42:30,585 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
2025-06-25 12:42:30,585 INFO sqlalchemy.engine.Engine [cached since 1.719s ago] (5,)
INFO:sqlalchemy.engine.Engine:[cached since 1.719s ago] (5,)
2025-06-25 12:42:30,585 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
2025-06-25 12:42:30,585 INFO sqlalchemy.engine.Engine [cached since 1.72s ago] (6,)
INFO:sqlalchemy.engine.Engine:[cached since 1.72s ago] (6,)
2025-06-25 12:42:30,587 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
2025-06-25 12:42:30,587 INFO sqlalchemy.engine.Engine [cached since 1.722s ago] (8,)
INFO:sqlalchemy.engine.Engine:[cached since 1.722s ago] (8,)
2025-06-25 12:42:30,589 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
2025-06-25 12:42:30,589 INFO sqlalchemy.engine.Engine [cached since 1.724s ago] (13,)
INFO:sqlalchemy.engine.Engine:[cached since 1.724s ago] (13,)
2025-06-25 12:42:30,591 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
2025-06-25 12:42:30,592 INFO sqlalchemy.engine.Engine [cached since 1.725s ago] (14,)
INFO:sqlalchemy.engine.Engine:[cached since 1.725s ago] (14,)
INFO:     127.0.0.1:60404 - "GET /guests HTTP/1.1" 200 OK
2025-06-25 12:42:30,594 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
2025-06-25 12:42:31,284 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 12:42:31,284 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ?
2025-06-25 12:42:31,285 INFO sqlalchemy.engine.Engine [cached since 1.92s ago] (datetime.datetime(2025, 5, 26, 0, 0), datetime.datetime(2025, 6, 25, 23, 59, 59), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 1.92s ago] (datetime.datetime(2025, 5, 26, 0, 0), datetime.datetime(2025, 6, 25, 23, 59, 59), '已结账')
2025-06-25 12:42:31,288 INFO sqlalchemy.engine.Engine SELECT TOP 10 [Products].[Name] AS [Products_Name], sum([BillItems].[Quantity]) AS sales, sum([BillItems].[Price] * [BillItems].[Quantity]) AS revenue 
FROM [Products] JOIN [BillItems] ON [BillItems].[ProductID] = [Products].[ProductID] JOIN [Bills] ON [Bills].[BillID] = [BillItems].[BillID] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ? GROUP BY [Products].[Name] ORDER BY sum([BillItems].[Quantity]) DESC
INFO:sqlalchemy.engine.Engine:SELECT TOP 10 [Products].[Name] AS [Products_Name], sum([BillItems].[Quantity]) AS sales, sum([BillItems].[Price] * [BillItems].[Quantity]) AS revenue 
FROM [Products] JOIN [BillItems] ON [BillItems].[ProductID] = [Products].[ProductID] JOIN [Bills] ON [Bills].[BillID] = [BillItems].[BillID] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ? GROUP BY [Products].[Name] ORDER BY sum([BillItems].[Quantity]) DESC
2025-06-25 12:42:31,288 INFO sqlalchemy.engine.Engine [cached since 1.916s ago] (datetime.datetime(2025, 5, 26, 0, 0), datetime.datetime(2025, 6, 25, 23, 59, 59), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 1.916s ago] (datetime.datetime(2025, 5, 26, 0, 0), datetime.datetime(2025, 6, 25, 23, 59, 59), '已结账')
INFO:     127.0.0.1:60404 - "GET /report/sales?start=2025-05-26&end=2025-06-25&unit=day HTTP/1.1" 200 OK
2025-06-25 12:42:31,291 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
2025-06-25 12:42:32,255 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 12:42:32,257 INFO sqlalchemy.engine.Engine SELECT [Guests].[GuestID] AS [Guests_GuestID], [Guests].[Name] AS [Guests_Name], [Guests].[Level] AS [Guests_Level], [Guests].[Points] AS [Guests_Points], [Guests].[Phone] AS [Guests_Phone] 
FROM [Guests]
INFO:sqlalchemy.engine.Engine:SELECT [Guests].[GuestID] AS [Guests_GuestID], [Guests].[Name] AS [Guests_Name], [Guests].[Level] AS [Guests_Level], [Guests].[Points] AS [Guests_Points], [Guests].[Phone] AS [Guests_Phone] 
FROM [Guests]
2025-06-25 12:42:32,257 INFO sqlalchemy.engine.Engine [cached since 3.397s ago] ()
INFO:sqlalchemy.engine.Engine:[cached since 3.397s ago] ()
2025-06-25 12:42:32,258 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
2025-06-25 12:42:32,259 INFO sqlalchemy.engine.Engine [cached since 3.393s ago] (1,)
INFO:sqlalchemy.engine.Engine:[cached since 3.393s ago] (1,)
2025-06-25 12:42:32,260 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
2025-06-25 12:42:32,260 INFO sqlalchemy.engine.Engine [cached since 3.395s ago] (2,)
INFO:sqlalchemy.engine.Engine:[cached since 3.395s ago] (2,)
2025-06-25 12:42:32,262 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
2025-06-25 12:42:32,263 INFO sqlalchemy.engine.Engine [cached since 3.397s ago] (3,)
INFO:sqlalchemy.engine.Engine:[cached since 3.397s ago] (3,)
2025-06-25 12:42:32,264 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
2025-06-25 12:42:32,264 INFO sqlalchemy.engine.Engine [cached since 3.399s ago] (4,)
INFO:sqlalchemy.engine.Engine:[cached since 3.399s ago] (4,)
2025-06-25 12:42:32,264 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
2025-06-25 12:42:32,264 INFO sqlalchemy.engine.Engine [cached since 3.401s ago] (5,)
INFO:sqlalchemy.engine.Engine:[cached since 3.401s ago] (5,)
2025-06-25 12:42:32,268 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
2025-06-25 12:42:32,268 INFO sqlalchemy.engine.Engine [cached since 3.402s ago] (6,)
INFO:sqlalchemy.engine.Engine:[cached since 3.402s ago] (6,)
2025-06-25 12:42:32,269 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
2025-06-25 12:42:32,269 INFO sqlalchemy.engine.Engine [cached since 3.404s ago] (8,)
INFO:sqlalchemy.engine.Engine:[cached since 3.404s ago] (8,)
2025-06-25 12:42:32,271 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
2025-06-25 12:42:32,271 INFO sqlalchemy.engine.Engine [cached since 3.406s ago] (13,)
INFO:sqlalchemy.engine.Engine:[cached since 3.406s ago] (13,)
2025-06-25 12:42:32,273 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
2025-06-25 12:42:32,273 INFO sqlalchemy.engine.Engine [cached since 3.407s ago] (14,)
INFO:sqlalchemy.engine.Engine:[cached since 3.407s ago] (14,)
INFO:     127.0.0.1:60404 - "GET /guests HTTP/1.1" 200 OK
2025-06-25 12:42:32,277 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:     127.0.0.1:60413 - "OPTIONS /guests/1 HTTP/1.1" 200 OK
2025-06-25 12:42:51,347 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 12:42:51,348 INFO sqlalchemy.engine.Engine SELECT TOP 1 [Guests].[GuestID] AS [Guests_GuestID], [Guests].[Name] AS [Guests_Name], [Guests].[Level] AS [Guests_Level], [Guests].[Points] AS [Guests_Points], [Guests].[Phone] AS [Guests_Phone] 
FROM [Guests] 
WHERE [Guests].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT TOP 1 [Guests].[GuestID] AS [Guests_GuestID], [Guests].[Name] AS [Guests_Name], [Guests].[Level] AS [Guests_Level], [Guests].[Points] AS [Guests_Points], [Guests].[Phone] AS [Guests_Phone] 
FROM [Guests] 
WHERE [Guests].[GuestID] = ?
2025-06-25 12:42:51,348 INFO sqlalchemy.engine.Engine [generated in 0.00046s] (1,)
INFO:sqlalchemy.engine.Engine:[generated in 0.00046s] (1,)
INFO:__main__:客户 李华 积分更新: 800 -> 2200
INFO:__main__:客户 李华 等级自动更新: normal -> vip
2025-06-25 12:42:51,351 INFO sqlalchemy.engine.Engine UPDATE [Guests] SET [Level]=?, [Points]=? WHERE [Guests].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:UPDATE [Guests] SET [Level]=?, [Points]=? WHERE [Guests].[GuestID] = ?
2025-06-25 12:42:51,351 INFO sqlalchemy.engine.Engine [generated in 0.00041s] ('vip', 2200, 1)
INFO:sqlalchemy.engine.Engine:[generated in 0.00041s] ('vip', 2200, 1)
2025-06-25 12:42:51,355 INFO sqlalchemy.engine.Engine COMMIT
INFO:sqlalchemy.engine.Engine:COMMIT
2025-06-25 12:43:05,675 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 12:43:05,675 INFO sqlalchemy.engine.Engine SELECT [Guests].[GuestID], [Guests].[Name], [Guests].[Level], [Guests].[Points], [Guests].[Phone] 
FROM [Guests] 
WHERE [Guests].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Guests].[GuestID], [Guests].[Name], [Guests].[Level], [Guests].[Points], [Guests].[Phone] 
FROM [Guests] 
WHERE [Guests].[GuestID] = ?
2025-06-25 12:43:05,675 INFO sqlalchemy.engine.Engine [generated in 0.00038s] (1,)
INFO:sqlalchemy.engine.Engine:[generated in 0.00038s] (1,)
2025-06-25 12:43:05,675 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
2025-06-25 12:43:05,675 INFO sqlalchemy.engine.Engine [cached since 36.82s ago] (1,)
INFO:sqlalchemy.engine.Engine:[cached since 36.82s ago] (1,)
2025-06-25 12:43:05,675 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
2025-06-25 12:43:53,574 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 12:43:53,574 INFO sqlalchemy.engine.Engine SELECT [Guests].[GuestID] AS [Guests_GuestID], [Guests].[Name] AS [Guests_Name], [Guests].[Level] AS [Guests_Level], [Guests].[Points] AS [Guests_Points], [Guests].[Phone] AS [Guests_Phone] 
FROM [Guests]
INFO:sqlalchemy.engine.Engine:SELECT [Guests].[GuestID] AS [Guests_GuestID], [Guests].[Name] AS [Guests_Name], [Guests].[Level] AS [Guests_Level], [Guests].[Points] AS [Guests_Points], [Guests].[Phone] AS [Guests_Phone] 
FROM [Guests]
2025-06-25 12:43:53,574 INFO sqlalchemy.engine.Engine [cached since 84.72s ago] ()
INFO:sqlalchemy.engine.Engine:[cached since 84.72s ago] ()
2025-06-25 12:43:53,578 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
2025-06-25 12:43:53,578 INFO sqlalchemy.engine.Engine [cached since 84.72s ago] (1,)
INFO:sqlalchemy.engine.Engine:[cached since 84.72s ago] (1,)
2025-06-25 12:43:53,582 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
2025-06-25 12:43:53,582 INFO sqlalchemy.engine.Engine [cached since 84.72s ago] (2,)
INFO:sqlalchemy.engine.Engine:[cached since 84.72s ago] (2,)
2025-06-25 12:43:53,582 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
2025-06-25 12:43:53,582 INFO sqlalchemy.engine.Engine [cached since 84.72s ago] (3,)
INFO:sqlalchemy.engine.Engine:[cached since 84.72s ago] (3,)
2025-06-25 12:43:53,582 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
2025-06-25 12:43:53,582 INFO sqlalchemy.engine.Engine [cached since 84.72s ago] (4,)
INFO:sqlalchemy.engine.Engine:[cached since 84.72s ago] (4,)
2025-06-25 12:43:53,582 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
2025-06-25 12:43:53,582 INFO sqlalchemy.engine.Engine [cached since 84.72s ago] (5,)
INFO:sqlalchemy.engine.Engine:[cached since 84.72s ago] (5,)
2025-06-25 12:43:53,590 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
2025-06-25 12:43:53,590 INFO sqlalchemy.engine.Engine [cached since 84.73s ago] (6,)
INFO:sqlalchemy.engine.Engine:[cached since 84.73s ago] (6,)
2025-06-25 12:43:53,590 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
2025-06-25 12:43:53,590 INFO sqlalchemy.engine.Engine [cached since 84.73s ago] (8,)
INFO:sqlalchemy.engine.Engine:[cached since 84.73s ago] (8,)
2025-06-25 12:43:53,590 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
2025-06-25 12:43:53,590 INFO sqlalchemy.engine.Engine [cached since 84.73s ago] (13,)
INFO:sqlalchemy.engine.Engine:[cached since 84.73s ago] (13,)
2025-06-25 12:43:53,590 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
2025-06-25 12:43:53,590 INFO sqlalchemy.engine.Engine [cached since 84.73s ago] (14,)
INFO:sqlalchemy.engine.Engine:[cached since 84.73s ago] (14,)
INFO:     127.0.0.1:60473 - "GET /guests HTTP/1.1" 200 OK
2025-06-25 12:43:53,590 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
2025-06-25 12:44:33,416 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 12:44:33,417 INFO sqlalchemy.engine.Engine SELECT [Guests].[GuestID] AS [Guests_GuestID], [Guests].[Name] AS [Guests_Name], [Guests].[Level] AS [Guests_Level], [Guests].[Points] AS [Guests_Points], [Guests].[Phone] AS [Guests_Phone] 
FROM [Guests]
INFO:sqlalchemy.engine.Engine:SELECT [Guests].[GuestID] AS [Guests_GuestID], [Guests].[Name] AS [Guests_Name], [Guests].[Level] AS [Guests_Level], [Guests].[Points] AS [Guests_Points], [Guests].[Phone] AS [Guests_Phone] 
FROM [Guests]
2025-06-25 12:44:33,417 INFO sqlalchemy.engine.Engine [cached since 124.6s ago] ()
INFO:sqlalchemy.engine.Engine:[cached since 124.6s ago] ()
2025-06-25 12:44:33,422 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
2025-06-25 12:44:33,422 INFO sqlalchemy.engine.Engine [cached since 124.6s ago] (1,)
INFO:sqlalchemy.engine.Engine:[cached since 124.6s ago] (1,)
2025-06-25 12:44:33,427 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
2025-06-25 12:44:33,427 INFO sqlalchemy.engine.Engine [cached since 124.6s ago] (2,)
INFO:sqlalchemy.engine.Engine:[cached since 124.6s ago] (2,)
2025-06-25 12:44:33,430 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
2025-06-25 12:44:33,430 INFO sqlalchemy.engine.Engine [cached since 124.6s ago] (3,)
INFO:sqlalchemy.engine.Engine:[cached since 124.6s ago] (3,)
2025-06-25 12:44:33,432 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
2025-06-25 12:44:33,432 INFO sqlalchemy.engine.Engine [cached since 124.6s ago] (4,)
INFO:sqlalchemy.engine.Engine:[cached since 124.6s ago] (4,)
2025-06-25 12:44:33,434 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
2025-06-25 12:44:33,434 INFO sqlalchemy.engine.Engine [cached since 124.6s ago] (5,)
INFO:sqlalchemy.engine.Engine:[cached since 124.6s ago] (5,)
2025-06-25 12:44:33,436 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
2025-06-25 12:44:33,436 INFO sqlalchemy.engine.Engine [cached since 124.6s ago] (6,)
INFO:sqlalchemy.engine.Engine:[cached since 124.6s ago] (6,)
2025-06-25 12:44:33,438 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
2025-06-25 12:44:33,438 INFO sqlalchemy.engine.Engine [cached since 124.6s ago] (8,)
INFO:sqlalchemy.engine.Engine:[cached since 124.6s ago] (8,)
2025-06-25 12:44:33,438 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
2025-06-25 12:44:33,438 INFO sqlalchemy.engine.Engine [cached since 124.6s ago] (13,)
INFO:sqlalchemy.engine.Engine:[cached since 124.6s ago] (13,)
2025-06-25 12:44:33,438 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
2025-06-25 12:44:33,438 INFO sqlalchemy.engine.Engine [cached since 124.6s ago] (14,)
INFO:sqlalchemy.engine.Engine:[cached since 124.6s ago] (14,)
INFO:     127.0.0.1:60475 - "GET /guests HTTP/1.1" 200 OK
2025-06-25 12:44:33,445 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:     127.0.0.1:60545 - "OPTIONS /guests/3 HTTP/1.1" 200 OK
2025-06-25 12:44:41,528 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 12:44:41,528 INFO sqlalchemy.engine.Engine SELECT TOP 1 [Guests].[GuestID] AS [Guests_GuestID], [Guests].[Name] AS [Guests_Name], [Guests].[Level] AS [Guests_Level], [Guests].[Points] AS [Guests_Points], [Guests].[Phone] AS [Guests_Phone] 
FROM [Guests] 
WHERE [Guests].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT TOP 1 [Guests].[GuestID] AS [Guests_GuestID], [Guests].[Name] AS [Guests_Name], [Guests].[Level] AS [Guests_Level], [Guests].[Points] AS [Guests_Points], [Guests].[Phone] AS [Guests_Phone] 
FROM [Guests] 
WHERE [Guests].[GuestID] = ?
2025-06-25 12:44:41,528 INFO sqlalchemy.engine.Engine [cached since 110.2s ago] (3,)
INFO:sqlalchemy.engine.Engine:[cached since 110.2s ago] (3,)
INFO:__main__:客户 王丽 积分更新: 300 -> 3000
INFO:__main__:客户 王丽 等级自动更新: normal -> vip
2025-06-25 12:44:41,532 INFO sqlalchemy.engine.Engine UPDATE [Guests] SET [Level]=?, [Points]=? WHERE [Guests].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:UPDATE [Guests] SET [Level]=?, [Points]=? WHERE [Guests].[GuestID] = ?
2025-06-25 12:44:41,532 INFO sqlalchemy.engine.Engine [cached since 110.2s ago] ('vip', 3000, 3)
INFO:sqlalchemy.engine.Engine:[cached since 110.2s ago] ('vip', 3000, 3)
2025-06-25 12:44:41,536 INFO sqlalchemy.engine.Engine COMMIT
INFO:sqlalchemy.engine.Engine:COMMIT
2025-06-25 12:44:41,536 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 12:44:41,536 INFO sqlalchemy.engine.Engine SELECT [Guests].[GuestID], [Guests].[Name], [Guests].[Level], [Guests].[Points], [Guests].[Phone] 
FROM [Guests] 
WHERE [Guests].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Guests].[GuestID], [Guests].[Name], [Guests].[Level], [Guests].[Points], [Guests].[Phone] 
FROM [Guests] 
WHERE [Guests].[GuestID] = ?
2025-06-25 12:44:41,536 INFO sqlalchemy.engine.Engine [cached since 95.86s ago] (3,)
INFO:sqlalchemy.engine.Engine:[cached since 95.86s ago] (3,)
2025-06-25 12:44:41,541 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
2025-06-25 12:44:41,541 INFO sqlalchemy.engine.Engine [cached since 132.7s ago] (3,)
INFO:sqlalchemy.engine.Engine:[cached since 132.7s ago] (3,)
INFO:     127.0.0.1:60545 - "PUT /guests/3 HTTP/1.1" 200 OK
2025-06-25 12:44:41,545 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
2025-06-25 12:44:41,570 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 12:44:41,572 INFO sqlalchemy.engine.Engine SELECT [Guests].[GuestID] AS [Guests_GuestID], [Guests].[Name] AS [Guests_Name], [Guests].[Level] AS [Guests_Level], [Guests].[Points] AS [Guests_Points], [Guests].[Phone] AS [Guests_Phone] 
FROM [Guests]
INFO:sqlalchemy.engine.Engine:SELECT [Guests].[GuestID] AS [Guests_GuestID], [Guests].[Name] AS [Guests_Name], [Guests].[Level] AS [Guests_Level], [Guests].[Points] AS [Guests_Points], [Guests].[Phone] AS [Guests_Phone] 
FROM [Guests]
2025-06-25 12:44:41,572 INFO sqlalchemy.engine.Engine [cached since 132.7s ago] ()
INFO:sqlalchemy.engine.Engine:[cached since 132.7s ago] ()
2025-06-25 12:44:41,574 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
2025-06-25 12:44:41,574 INFO sqlalchemy.engine.Engine [cached since 132.7s ago] (1,)
INFO:sqlalchemy.engine.Engine:[cached since 132.7s ago] (1,)
2025-06-25 12:44:41,574 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
2025-06-25 12:44:41,574 INFO sqlalchemy.engine.Engine [cached since 132.7s ago] (2,)
INFO:sqlalchemy.engine.Engine:[cached since 132.7s ago] (2,)
2025-06-25 12:44:41,574 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
2025-06-25 12:44:41,574 INFO sqlalchemy.engine.Engine [cached since 132.7s ago] (3,)
INFO:sqlalchemy.engine.Engine:[cached since 132.7s ago] (3,)
2025-06-25 12:44:41,574 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
2025-06-25 12:44:41,574 INFO sqlalchemy.engine.Engine [cached since 132.7s ago] (4,)
INFO:sqlalchemy.engine.Engine:[cached since 132.7s ago] (4,)
2025-06-25 12:44:41,582 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
2025-06-25 12:44:41,582 INFO sqlalchemy.engine.Engine [cached since 132.7s ago] (5,)
INFO:sqlalchemy.engine.Engine:[cached since 132.7s ago] (5,)
2025-06-25 12:44:41,583 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
2025-06-25 12:44:41,584 INFO sqlalchemy.engine.Engine [cached since 132.7s ago] (6,)
INFO:sqlalchemy.engine.Engine:[cached since 132.7s ago] (6,)
2025-06-25 12:44:41,585 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
2025-06-25 12:44:41,585 INFO sqlalchemy.engine.Engine [cached since 132.7s ago] (8,)
INFO:sqlalchemy.engine.Engine:[cached since 132.7s ago] (8,)
2025-06-25 12:44:41,587 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
2025-06-25 12:44:41,587 INFO sqlalchemy.engine.Engine [cached since 132.7s ago] (13,)
INFO:sqlalchemy.engine.Engine:[cached since 132.7s ago] (13,)
2025-06-25 12:44:41,587 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[GuestID] = ?
2025-06-25 12:44:41,587 INFO sqlalchemy.engine.Engine [cached since 132.7s ago] (14,)
INFO:sqlalchemy.engine.Engine:[cached since 132.7s ago] (14,)
INFO:     127.0.0.1:60545 - "GET /guests HTTP/1.1" 200 OK
2025-06-25 12:44:41,592 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [41512]
