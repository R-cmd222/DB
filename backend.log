INFO:     Started server process [69260]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:9527 (Press CTRL+C to quit)
2025-06-25 13:59:07,718 INFO sqlalchemy.engine.Engine SELECT CAST(SERVERPROPERTY('ProductVersion') AS VARCHAR)
INFO:sqlalchemy.engine.Engine:SELECT CAST(SERVERPROPERTY('ProductVersion') AS VARCHAR)
2025-06-25 13:59:07,718 INFO sqlalchemy.engine.Engine [raw sql] ()
INFO:sqlalchemy.engine.Engine:[raw sql] ()
2025-06-25 13:59:07,718 INFO sqlalchemy.engine.Engine SELECT schema_name()
INFO:sqlalchemy.engine.Engine:SELECT schema_name()
2025-06-25 13:59:07,718 INFO sqlalchemy.engine.Engine [generated in 0.00035s] ()
INFO:sqlalchemy.engine.Engine:[generated in 0.00035s] ()
2025-06-25 13:59:07,734 INFO sqlalchemy.engine.Engine SELECT CAST('test max support' AS NVARCHAR(max))
INFO:sqlalchemy.engine.Engine:SELECT CAST('test max support' AS NVARCHAR(max))
2025-06-25 13:59:07,734 INFO sqlalchemy.engine.Engine [generated in 0.00042s] ()
INFO:sqlalchemy.engine.Engine:[generated in 0.00042s] ()
2025-06-25 13:59:07,734 INFO sqlalchemy.engine.Engine SELECT 1 FROM fn_listextendedproperty(default, default, default, default, default, default, default)
INFO:sqlalchemy.engine.Engine:SELECT 1 FROM fn_listextendedproperty(default, default, default, default, default, default, default)
2025-06-25 13:59:07,734 INFO sqlalchemy.engine.Engine [generated in 0.00031s] ()
INFO:sqlalchemy.engine.Engine:[generated in 0.00031s] ()
2025-06-25 13:59:07,797 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 13:59:07,797 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ?
2025-06-25 13:59:07,797 INFO sqlalchemy.engine.Engine [generated in 0.00044s] (datetime.datetime(2025, 5, 26, 0, 0), datetime.datetime(2025, 6, 25, 23, 59, 59), '已结账')
INFO:sqlalchemy.engine.Engine:[generated in 0.00044s] (datetime.datetime(2025, 5, 26, 0, 0), datetime.datetime(2025, 6, 25, 23, 59, 59), '已结账')
2025-06-25 13:59:07,813 INFO sqlalchemy.engine.Engine SELECT TOP 10 [Products].[Name] AS [Products_Name], sum([BillItems].[Quantity]) AS sales, sum([BillItems].[Price] * [BillItems].[Quantity]) AS revenue 
FROM [Products] JOIN [BillItems] ON [BillItems].[ProductID] = [Products].[ProductID] JOIN [Bills] ON [Bills].[BillID] = [BillItems].[BillID] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ? GROUP BY [Products].[Name] ORDER BY sum([BillItems].[Quantity]) DESC
INFO:sqlalchemy.engine.Engine:SELECT TOP 10 [Products].[Name] AS [Products_Name], sum([BillItems].[Quantity]) AS sales, sum([BillItems].[Price] * [BillItems].[Quantity]) AS revenue 
FROM [Products] JOIN [BillItems] ON [BillItems].[ProductID] = [Products].[ProductID] JOIN [Bills] ON [Bills].[BillID] = [BillItems].[BillID] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ? GROUP BY [Products].[Name] ORDER BY sum([BillItems].[Quantity]) DESC
2025-06-25 13:59:07,813 INFO sqlalchemy.engine.Engine [generated in 0.00046s] (datetime.datetime(2025, 5, 26, 0, 0), datetime.datetime(2025, 6, 25, 23, 59, 59), '已结账')
INFO:sqlalchemy.engine.Engine:[generated in 0.00046s] (datetime.datetime(2025, 5, 26, 0, 0), datetime.datetime(2025, 6, 25, 23, 59, 59), '已结账')
INFO:     127.0.0.1:59690 - "GET /report/sales?start=2025-05-26&end=2025-06-25&unit=day HTTP/1.1" 200 OK
2025-06-25 13:59:07,813 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
2025-06-25 13:59:07,813 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 13:59:07,813 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ?
2025-06-25 13:59:07,813 INFO sqlalchemy.engine.Engine [cached since 0.0195s ago] (datetime.datetime(2025, 5, 26, 0, 0), datetime.datetime(2025, 6, 25, 23, 59, 59), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 0.0195s ago] (datetime.datetime(2025, 5, 26, 0, 0), datetime.datetime(2025, 6, 25, 23, 59, 59), '已结账')
2025-06-25 13:59:07,829 INFO sqlalchemy.engine.Engine SELECT TOP 10 [Products].[Name] AS [Products_Name], sum([BillItems].[Quantity]) AS sales, sum([BillItems].[Price] * [BillItems].[Quantity]) AS revenue 
FROM [Products] JOIN [BillItems] ON [BillItems].[ProductID] = [Products].[ProductID] JOIN [Bills] ON [Bills].[BillID] = [BillItems].[BillID] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ? GROUP BY [Products].[Name] ORDER BY sum([BillItems].[Quantity]) DESC
INFO:sqlalchemy.engine.Engine:SELECT TOP 10 [Products].[Name] AS [Products_Name], sum([BillItems].[Quantity]) AS sales, sum([BillItems].[Price] * [BillItems].[Quantity]) AS revenue 
FROM [Products] JOIN [BillItems] ON [BillItems].[ProductID] = [Products].[ProductID] JOIN [Bills] ON [Bills].[BillID] = [BillItems].[BillID] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ? GROUP BY [Products].[Name] ORDER BY sum([BillItems].[Quantity]) DESC
2025-06-25 13:59:07,829 INFO sqlalchemy.engine.Engine [cached since 0.01397s ago] (datetime.datetime(2025, 5, 26, 0, 0), datetime.datetime(2025, 6, 25, 23, 59, 59), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 0.01397s ago] (datetime.datetime(2025, 5, 26, 0, 0), datetime.datetime(2025, 6, 25, 23, 59, 59), '已结账')
INFO:     127.0.0.1:59691 - "GET /report/sales?start=2025-05-26&end=2025-06-25&unit=day HTTP/1.1" 200 OK
2025-06-25 13:59:07,829 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
2025-06-25 13:59:07,829 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 13:59:07,829 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ?
2025-06-25 13:59:07,829 INFO sqlalchemy.engine.Engine [cached since 0.02824s ago] (datetime.datetime(2025, 5, 26, 0, 0), datetime.datetime(2025, 6, 25, 23, 59, 59), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 0.02824s ago] (datetime.datetime(2025, 5, 26, 0, 0), datetime.datetime(2025, 6, 25, 23, 59, 59), '已结账')
2025-06-25 13:59:07,829 INFO sqlalchemy.engine.Engine SELECT TOP 10 [Products].[Name] AS [Products_Name], sum([BillItems].[Quantity]) AS sales, sum([BillItems].[Price] * [BillItems].[Quantity]) AS revenue 
FROM [Products] JOIN [BillItems] ON [BillItems].[ProductID] = [Products].[ProductID] JOIN [Bills] ON [Bills].[BillID] = [BillItems].[BillID] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ? GROUP BY [Products].[Name] ORDER BY sum([BillItems].[Quantity]) DESC
INFO:sqlalchemy.engine.Engine:SELECT TOP 10 [Products].[Name] AS [Products_Name], sum([BillItems].[Quantity]) AS sales, sum([BillItems].[Price] * [BillItems].[Quantity]) AS revenue 
FROM [Products] JOIN [BillItems] ON [BillItems].[ProductID] = [Products].[ProductID] JOIN [Bills] ON [Bills].[BillID] = [BillItems].[BillID] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ? GROUP BY [Products].[Name] ORDER BY sum([BillItems].[Quantity]) DESC
2025-06-25 13:59:07,829 INFO sqlalchemy.engine.Engine [cached since 0.02255s ago] (datetime.datetime(2025, 5, 26, 0, 0), datetime.datetime(2025, 6, 25, 23, 59, 59), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 0.02255s ago] (datetime.datetime(2025, 5, 26, 0, 0), datetime.datetime(2025, 6, 25, 23, 59, 59), '已结账')
INFO:     127.0.0.1:59690 - "GET /report/sales?start=2025-05-26&end=2025-06-25&unit=day HTTP/1.1" 200 OK
2025-06-25 13:59:07,829 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
2025-06-25 13:59:25,447 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 13:59:25,451 INFO sqlalchemy.engine.Engine SELECT TOP 1 [Employees].[EmployeeID] AS [Employees_EmployeeID], [Employees].[Name] AS [Employees_Name], [Employees].[Gender] AS [Employees_Gender], [Employees].[BirthDate] AS [Employees_BirthDate], [Employees].[Position] AS [Employees_Position], [Employees].[Phone] AS [Employees_Phone], [Employees].username AS [Employees_username], [Employees].password AS [Employees_password], [Employees].role AS [Employees_role] 
FROM [Employees] 
WHERE [Employees].username = ?
INFO:sqlalchemy.engine.Engine:SELECT TOP 1 [Employees].[EmployeeID] AS [Employees_EmployeeID], [Employees].[Name] AS [Employees_Name], [Employees].[Gender] AS [Employees_Gender], [Employees].[BirthDate] AS [Employees_BirthDate], [Employees].[Position] AS [Employees_Position], [Employees].[Phone] AS [Employees_Phone], [Employees].username AS [Employees_username], [Employees].password AS [Employees_password], [Employees].role AS [Employees_role] 
FROM [Employees] 
WHERE [Employees].username = ?
2025-06-25 13:59:25,451 INFO sqlalchemy.engine.Engine [generated in 0.00045s] ('admin1',)
INFO:sqlalchemy.engine.Engine:[generated in 0.00045s] ('admin1',)
INFO:     127.0.0.1:59759 - "POST /login HTTP/1.1" 200 OK
2025-06-25 13:59:25,456 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:     127.0.0.1:59759 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:59759 - "GET /health HTTP/1.1" 200 OK
2025-06-25 13:59:25,567 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 13:59:25,577 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products]) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products]) AS anon_1
2025-06-25 13:59:25,577 INFO sqlalchemy.engine.Engine [generated in 0.00038s] ()
INFO:sqlalchemy.engine.Engine:[generated in 0.00038s] ()
2025-06-25 13:59:25,580 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills]) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills]) AS anon_1
2025-06-25 13:59:25,580 INFO sqlalchemy.engine.Engine [generated in 0.00035s] ()
INFO:sqlalchemy.engine.Engine:[generated in 0.00035s] ()
2025-06-25 13:59:25,586 INFO sqlalchemy.engine.Engine SELECT sum([Products].[Stock]) AS sum_1 
FROM [Products]
INFO:sqlalchemy.engine.Engine:SELECT sum([Products].[Stock]) AS sum_1 
FROM [Products]
2025-06-25 13:59:25,586 INFO sqlalchemy.engine.Engine [generated in 0.00032s] ()
INFO:sqlalchemy.engine.Engine:[generated in 0.00032s] ()
2025-06-25 13:59:25,590 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products] 
WHERE [Products].[Stock] < ?) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products] 
WHERE [Products].[Stock] < ?) AS anon_1
2025-06-25 13:59:25,590 INFO sqlalchemy.engine.Engine [generated in 0.00037s] (10,)
INFO:sqlalchemy.engine.Engine:[generated in 0.00037s] (10,)
INFO:     127.0.0.1:59759 - "GET /stats HTTP/1.1" 200 OK
2025-06-25 13:59:25,594 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
2025-06-25 13:59:25,597 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 13:59:25,597 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products]) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products]) AS anon_1
2025-06-25 13:59:25,597 INFO sqlalchemy.engine.Engine [cached since 0.02102s ago] ()
INFO:sqlalchemy.engine.Engine:[cached since 0.02102s ago] ()
2025-06-25 13:59:25,597 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills]) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills]) AS anon_1
2025-06-25 13:59:25,601 INFO sqlalchemy.engine.Engine [cached since 0.01806s ago] ()
INFO:sqlalchemy.engine.Engine:[cached since 0.01806s ago] ()
2025-06-25 13:59:25,602 INFO sqlalchemy.engine.Engine SELECT sum([Products].[Stock]) AS sum_1 
FROM [Products]
INFO:sqlalchemy.engine.Engine:SELECT sum([Products].[Stock]) AS sum_1 
FROM [Products]
2025-06-25 13:59:25,602 INFO sqlalchemy.engine.Engine [cached since 0.01622s ago] ()
INFO:sqlalchemy.engine.Engine:[cached since 0.01622s ago] ()
2025-06-25 13:59:25,602 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products] 
WHERE [Products].[Stock] < ?) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products] 
WHERE [Products].[Stock] < ?) AS anon_1
2025-06-25 13:59:25,602 INFO sqlalchemy.engine.Engine [cached since 0.0139s ago] (10,)
INFO:sqlalchemy.engine.Engine:[cached since 0.0139s ago] (10,)
INFO:     127.0.0.1:59759 - "GET /stats HTTP/1.1" 200 OK
2025-06-25 13:59:25,605 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
2025-06-25 13:59:25,609 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 13:59:25,610 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
2025-06-25 13:59:25,610 INFO sqlalchemy.engine.Engine [generated in 0.00041s] (datetime.datetime(2025, 6, 25, 0, 0), '已结账')
INFO:sqlalchemy.engine.Engine:[generated in 0.00041s] (datetime.datetime(2025, 6, 25, 0, 0), '已结账')
2025-06-25 13:59:25,613 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
2025-06-25 13:59:25,613 INFO sqlalchemy.engine.Engine [cached since 0.004442s ago] (datetime.datetime(2025, 6, 23, 0, 0), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 0.004442s ago] (datetime.datetime(2025, 6, 23, 0, 0), '已结账')
2025-06-25 13:59:25,618 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ?
2025-06-25 13:59:25,618 INFO sqlalchemy.engine.Engine [generated in 0.00056s] (datetime.datetime(2025, 6, 16, 0, 0), datetime.datetime(2025, 6, 22, 23, 59, 59), '已结账')
INFO:sqlalchemy.engine.Engine:[generated in 0.00056s] (datetime.datetime(2025, 6, 16, 0, 0), datetime.datetime(2025, 6, 22, 23, 59, 59), '已结账')
2025-06-25 13:59:25,621 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
2025-06-25 13:59:25,622 INFO sqlalchemy.engine.Engine [cached since 0.01076s ago] (datetime.datetime(2025, 6, 1, 0, 0), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 0.01076s ago] (datetime.datetime(2025, 6, 1, 0, 0), '已结账')
INFO:     127.0.0.1:59759 - "GET /dashboard/sales HTTP/1.1" 200 OK
2025-06-25 13:59:25,622 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
2025-06-25 13:59:25,626 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 13:59:25,626 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
2025-06-25 13:59:25,626 INFO sqlalchemy.engine.Engine [cached since 0.01695s ago] (datetime.datetime(2025, 6, 25, 0, 0), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 0.01695s ago] (datetime.datetime(2025, 6, 25, 0, 0), '已结账')
2025-06-25 13:59:25,630 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
2025-06-25 13:59:25,630 INFO sqlalchemy.engine.Engine [cached since 0.01885s ago] (datetime.datetime(2025, 6, 23, 0, 0), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 0.01885s ago] (datetime.datetime(2025, 6, 23, 0, 0), '已结账')
2025-06-25 13:59:25,630 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ?
2025-06-25 13:59:25,630 INFO sqlalchemy.engine.Engine [cached since 0.014s ago] (datetime.datetime(2025, 6, 16, 0, 0), datetime.datetime(2025, 6, 22, 23, 59, 59), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 0.014s ago] (datetime.datetime(2025, 6, 16, 0, 0), datetime.datetime(2025, 6, 22, 23, 59, 59), '已结账')
2025-06-25 13:59:25,630 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
2025-06-25 13:59:25,630 INFO sqlalchemy.engine.Engine [cached since 0.02222s ago] (datetime.datetime(2025, 6, 1, 0, 0), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 0.02222s ago] (datetime.datetime(2025, 6, 1, 0, 0), '已结账')
INFO:     127.0.0.1:59759 - "GET /dashboard/sales HTTP/1.1" 200 OK
2025-06-25 13:59:25,634 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
2025-06-25 13:59:25,638 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 13:59:25,639 INFO sqlalchemy.engine.Engine SELECT TOP 5 [Products].[Name] AS [Products_Name], sum([BillItems].[Quantity]) AS sales 
FROM [Products] JOIN [BillItems] ON [BillItems].[ProductID] = [Products].[ProductID] JOIN [Bills] ON [Bills].[BillID] = [BillItems].[BillID] 
WHERE [Bills].[Status] = ? GROUP BY [Products].[Name] ORDER BY sum([BillItems].[Quantity]) DESC
INFO:sqlalchemy.engine.Engine:SELECT TOP 5 [Products].[Name] AS [Products_Name], sum([BillItems].[Quantity]) AS sales 
FROM [Products] JOIN [BillItems] ON [BillItems].[ProductID] = [Products].[ProductID] JOIN [Bills] ON [Bills].[BillID] = [BillItems].[BillID] 
WHERE [Bills].[Status] = ? GROUP BY [Products].[Name] ORDER BY sum([BillItems].[Quantity]) DESC
2025-06-25 13:59:25,639 INFO sqlalchemy.engine.Engine [generated in 0.00039s] ('已结账',)
INFO:sqlalchemy.engine.Engine:[generated in 0.00039s] ('已结账',)
INFO:     127.0.0.1:59759 - "GET /dashboard/top-products?limit=5 HTTP/1.1" 200 OK
2025-06-25 13:59:25,647 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
2025-06-25 13:59:25,647 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 13:59:25,647 INFO sqlalchemy.engine.Engine SELECT TOP 5 [Products].[Name] AS [Products_Name], sum([BillItems].[Quantity]) AS sales 
FROM [Products] JOIN [BillItems] ON [BillItems].[ProductID] = [Products].[ProductID] JOIN [Bills] ON [Bills].[BillID] = [BillItems].[BillID] 
WHERE [Bills].[Status] = ? GROUP BY [Products].[Name] ORDER BY sum([BillItems].[Quantity]) DESC
INFO:sqlalchemy.engine.Engine:SELECT TOP 5 [Products].[Name] AS [Products_Name], sum([BillItems].[Quantity]) AS sales 
FROM [Products] JOIN [BillItems] ON [BillItems].[ProductID] = [Products].[ProductID] JOIN [Bills] ON [Bills].[BillID] = [BillItems].[BillID] 
WHERE [Bills].[Status] = ? GROUP BY [Products].[Name] ORDER BY sum([BillItems].[Quantity]) DESC
2025-06-25 13:59:25,650 INFO sqlalchemy.engine.Engine [cached since 0.01053s ago] ('已结账',)
INFO:sqlalchemy.engine.Engine:[cached since 0.01053s ago] ('已结账',)
INFO:     127.0.0.1:59759 - "GET /dashboard/top-products?limit=5 HTTP/1.1" 200 OK
2025-06-25 13:59:25,651 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
2025-06-25 13:59:27,271 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 13:59:27,272 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ?
2025-06-25 13:59:27,272 INFO sqlalchemy.engine.Engine [cached since 19.46s ago] (datetime.datetime(2025, 5, 26, 0, 0), datetime.datetime(2025, 6, 25, 23, 59, 59), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 19.46s ago] (datetime.datetime(2025, 5, 26, 0, 0), datetime.datetime(2025, 6, 25, 23, 59, 59), '已结账')
2025-06-25 13:59:27,278 INFO sqlalchemy.engine.Engine SELECT TOP 10 [Products].[Name] AS [Products_Name], sum([BillItems].[Quantity]) AS sales, sum([BillItems].[Price] * [BillItems].[Quantity]) AS revenue 
FROM [Products] JOIN [BillItems] ON [BillItems].[ProductID] = [Products].[ProductID] JOIN [Bills] ON [Bills].[BillID] = [BillItems].[BillID] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ? GROUP BY [Products].[Name] ORDER BY sum([BillItems].[Quantity]) DESC
INFO:sqlalchemy.engine.Engine:SELECT TOP 10 [Products].[Name] AS [Products_Name], sum([BillItems].[Quantity]) AS sales, sum([BillItems].[Price] * [BillItems].[Quantity]) AS revenue 
FROM [Products] JOIN [BillItems] ON [BillItems].[ProductID] = [Products].[ProductID] JOIN [Bills] ON [Bills].[BillID] = [BillItems].[BillID] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ? GROUP BY [Products].[Name] ORDER BY sum([BillItems].[Quantity]) DESC
2025-06-25 13:59:27,278 INFO sqlalchemy.engine.Engine [cached since 19.46s ago] (datetime.datetime(2025, 5, 26, 0, 0), datetime.datetime(2025, 6, 25, 23, 59, 59), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 19.46s ago] (datetime.datetime(2025, 5, 26, 0, 0), datetime.datetime(2025, 6, 25, 23, 59, 59), '已结账')
INFO:     127.0.0.1:59759 - "GET /report/sales?start=2025-05-26&end=2025-06-25&unit=day HTTP/1.1" 200 OK
2025-06-25 13:59:27,286 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:     127.0.0.1:59759 - "OPTIONS /report/customer?start=2025-05-26&end=2025-06-25 HTTP/1.1" 200 OK
2025-06-25 13:59:28,472 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 13:59:28,473 INFO sqlalchemy.engine.Engine SELECT [Guests].[GuestID] AS [Guests_GuestID], [Guests].[Name] AS [Guests_Name], [Guests].[Level] AS [Guests_Level], [Guests].[Points] AS [Guests_Points], [Guests].[Phone] AS [Guests_Phone] 
FROM [Guests]
INFO:sqlalchemy.engine.Engine:SELECT [Guests].[GuestID] AS [Guests_GuestID], [Guests].[Name] AS [Guests_Name], [Guests].[Level] AS [Guests_Level], [Guests].[Points] AS [Guests_Points], [Guests].[Phone] AS [Guests_Phone] 
FROM [Guests]
2025-06-25 13:59:28,473 INFO sqlalchemy.engine.Engine [generated in 0.00048s] ()
INFO:sqlalchemy.engine.Engine:[generated in 0.00048s] ()
2025-06-25 13:59:28,481 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Guests].[GuestID] AS [Guests_GuestID], [Guests].[Name] AS [Guests_Name], [Guests].[Level] AS [Guests_Level], [Guests].[Points] AS [Guests_Points], [Guests].[Phone] AS [Guests_Phone] 
FROM [Guests] 
WHERE [Guests].[Level] = ?) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Guests].[GuestID] AS [Guests_GuestID], [Guests].[Name] AS [Guests_Name], [Guests].[Level] AS [Guests_Level], [Guests].[Points] AS [Guests_Points], [Guests].[Phone] AS [Guests_Phone] 
FROM [Guests] 
WHERE [Guests].[Level] = ?) AS anon_1
2025-06-25 13:59:28,481 INFO sqlalchemy.engine.Engine [generated in 0.00049s] ('vip',)
INFO:sqlalchemy.engine.Engine:[generated in 0.00049s] ('vip',)
2025-06-25 13:59:28,484 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Guests].[GuestID] AS [Guests_GuestID], [Guests].[Name] AS [Guests_Name], [Guests].[Level] AS [Guests_Level], [Guests].[Points] AS [Guests_Points], [Guests].[Phone] AS [Guests_Phone] 
FROM [Guests] 
WHERE [Guests].[Level] = ?) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Guests].[GuestID] AS [Guests_GuestID], [Guests].[Name] AS [Guests_Name], [Guests].[Level] AS [Guests_Level], [Guests].[Points] AS [Guests_Points], [Guests].[Phone] AS [Guests_Phone] 
FROM [Guests] 
WHERE [Guests].[Level] = ?) AS anon_1
2025-06-25 13:59:28,484 INFO sqlalchemy.engine.Engine [cached since 0.004629s ago] ('diamond',)
INFO:sqlalchemy.engine.Engine:[cached since 0.004629s ago] ('diamond',)
2025-06-25 13:59:28,488 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Guests].[GuestID] AS [Guests_GuestID], [Guests].[Name] AS [Guests_Name], [Guests].[Level] AS [Guests_Level], [Guests].[Points] AS [Guests_Points], [Guests].[Phone] AS [Guests_Phone] 
FROM [Guests] 
WHERE [Guests].[Level] = ?) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Guests].[GuestID] AS [Guests_GuestID], [Guests].[Name] AS [Guests_Name], [Guests].[Level] AS [Guests_Level], [Guests].[Points] AS [Guests_Points], [Guests].[Phone] AS [Guests_Phone] 
FROM [Guests] 
WHERE [Guests].[Level] = ?) AS anon_1
2025-06-25 13:59:28,488 INFO sqlalchemy.engine.Engine [cached since 0.007715s ago] ('normal',)
INFO:sqlalchemy.engine.Engine:[cached since 0.007715s ago] ('normal',)
2025-06-25 13:59:28,497 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Guests].[GuestID] AS [Guests_GuestID], [Guests].[Name] AS [Guests_Name], [Guests].[Level] AS [Guests_Level], [Guests].[Points] AS [Guests_Points], [Guests].[Phone] AS [Guests_Phone] 
FROM [Guests] 
WHERE (EXISTS (SELECT 1 
FROM [Bills] 
WHERE [Guests].[GuestID] = [Bills].[GuestID] AND [Bills].[BillDate] >= ?)) AND (EXISTS (SELECT 1 
FROM [Bills] 
WHERE [Guests].[GuestID] = [Bills].[GuestID] AND [Bills].[BillDate] <= ?))) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Guests].[GuestID] AS [Guests_GuestID], [Guests].[Name] AS [Guests_Name], [Guests].[Level] AS [Guests_Level], [Guests].[Points] AS [Guests_Points], [Guests].[Phone] AS [Guests_Phone] 
FROM [Guests] 
WHERE (EXISTS (SELECT 1 
FROM [Bills] 
WHERE [Guests].[GuestID] = [Bills].[GuestID] AND [Bills].[BillDate] >= ?)) AND (EXISTS (SELECT 1 
FROM [Bills] 
WHERE [Guests].[GuestID] = [Bills].[GuestID] AND [Bills].[BillDate] <= ?))) AS anon_1
2025-06-25 13:59:28,497 INFO sqlalchemy.engine.Engine [generated in 0.00062s] (datetime.datetime(2025, 5, 26, 0, 0), datetime.datetime(2025, 6, 25, 0, 0))
INFO:sqlalchemy.engine.Engine:[generated in 0.00062s] (datetime.datetime(2025, 5, 26, 0, 0), datetime.datetime(2025, 6, 25, 0, 0))
2025-06-25 13:59:28,526 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Guests].[GuestID] AS [Guests_GuestID], [Guests].[Name] AS [Guests_Name], [Guests].[Level] AS [Guests_Level], [Guests].[Points] AS [Guests_Points], [Guests].[Phone] AS [Guests_Phone] 
FROM [Guests] 
WHERE EXISTS (SELECT 1 
FROM [Bills] 
WHERE [Guests].[GuestID] = [Bills].[GuestID])) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Guests].[GuestID] AS [Guests_GuestID], [Guests].[Name] AS [Guests_Name], [Guests].[Level] AS [Guests_Level], [Guests].[Points] AS [Guests_Points], [Guests].[Phone] AS [Guests_Phone] 
FROM [Guests] 
WHERE EXISTS (SELECT 1 
FROM [Bills] 
WHERE [Guests].[GuestID] = [Bills].[GuestID])) AS anon_1
2025-06-25 13:59:28,526 INFO sqlalchemy.engine.Engine [generated in 0.00045s] ()
INFO:sqlalchemy.engine.Engine:[generated in 0.00045s] ()
2025-06-25 13:59:28,534 INFO sqlalchemy.engine.Engine SELECT TOP 10 [Guests].[Name] AS [Guests_Name], [Guests].[Level] AS [Guests_Level], sum([Bills].[TotalAmount]) AS total_spent, count([Bills].[BillID]) AS order_count, max([Bills].[BillDate]) AS last_order_date 
FROM [Guests] JOIN [Bills] ON [Bills].[GuestID] = [Guests].[GuestID] 
WHERE [Bills].[Status] = ? GROUP BY [Guests].[GuestID], [Guests].[Name], [Guests].[Level] ORDER BY sum([Bills].[TotalAmount]) DESC
INFO:sqlalchemy.engine.Engine:SELECT TOP 10 [Guests].[Name] AS [Guests_Name], [Guests].[Level] AS [Guests_Level], sum([Bills].[TotalAmount]) AS total_spent, count([Bills].[BillID]) AS order_count, max([Bills].[BillDate]) AS last_order_date 
FROM [Guests] JOIN [Bills] ON [Bills].[GuestID] = [Guests].[GuestID] 
WHERE [Bills].[Status] = ? GROUP BY [Guests].[GuestID], [Guests].[Name], [Guests].[Level] ORDER BY sum([Bills].[TotalAmount]) DESC
2025-06-25 13:59:28,534 INFO sqlalchemy.engine.Engine [generated in 0.00049s] ('已结账',)
INFO:sqlalchemy.engine.Engine:[generated in 0.00049s] ('已结账',)
INFO:     127.0.0.1:59759 - "GET /report/customer?start=2025-05-26&end=2025-06-25 HTTP/1.1" 200 OK
2025-06-25 13:59:28,543 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
2025-06-25 13:59:30,931 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 13:59:30,932 INFO sqlalchemy.engine.Engine SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products]
INFO:sqlalchemy.engine.Engine:SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products]
2025-06-25 13:59:30,932 INFO sqlalchemy.engine.Engine [generated in 0.00042s] ()
INFO:sqlalchemy.engine.Engine:[generated in 0.00042s] ()
2025-06-25 13:59:30,937 INFO sqlalchemy.engine.Engine SELECT [Products].[Category] AS [Products_Category], sum([BillItems].[Quantity]) AS sales, sum([BillItems].[Price] * [BillItems].[Quantity]) AS revenue 
FROM [Products] JOIN [BillItems] ON [BillItems].[ProductID] = [Products].[ProductID] JOIN [Bills] ON [Bills].[BillID] = [BillItems].[BillID] 
WHERE [Bills].[Status] = ? GROUP BY [Products].[Category] ORDER BY sum([BillItems].[Quantity]) DESC
INFO:sqlalchemy.engine.Engine:SELECT [Products].[Category] AS [Products_Category], sum([BillItems].[Quantity]) AS sales, sum([BillItems].[Price] * [BillItems].[Quantity]) AS revenue 
FROM [Products] JOIN [BillItems] ON [BillItems].[ProductID] = [Products].[ProductID] JOIN [Bills] ON [Bills].[BillID] = [BillItems].[BillID] 
WHERE [Bills].[Status] = ? GROUP BY [Products].[Category] ORDER BY sum([BillItems].[Quantity]) DESC
2025-06-25 13:59:30,937 INFO sqlalchemy.engine.Engine [generated in 0.00038s] ('已结账',)
INFO:sqlalchemy.engine.Engine:[generated in 0.00038s] ('已结账',)
2025-06-25 13:59:30,942 INFO sqlalchemy.engine.Engine SELECT TOP 10 [Products].[Name] AS [Products_Name], sum([BillItems].[Quantity]) AS sales 
FROM [Products] JOIN [BillItems] ON [BillItems].[ProductID] = [Products].[ProductID] JOIN [Bills] ON [Bills].[BillID] = [BillItems].[BillID] 
WHERE [Bills].[Status] = ? GROUP BY [Products].[Name] ORDER BY sum([BillItems].[Quantity]) DESC
INFO:sqlalchemy.engine.Engine:SELECT TOP 10 [Products].[Name] AS [Products_Name], sum([BillItems].[Quantity]) AS sales 
FROM [Products] JOIN [BillItems] ON [BillItems].[ProductID] = [Products].[ProductID] JOIN [Bills] ON [Bills].[BillID] = [BillItems].[BillID] 
WHERE [Bills].[Status] = ? GROUP BY [Products].[Name] ORDER BY sum([BillItems].[Quantity]) DESC
2025-06-25 13:59:30,942 INFO sqlalchemy.engine.Engine [cached since 5.305s ago] ('已结账',)
INFO:sqlalchemy.engine.Engine:[cached since 5.305s ago] ('已结账',)
INFO:     127.0.0.1:59759 - "GET /report/product HTTP/1.1" 200 OK
2025-06-25 13:59:30,951 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
2025-06-25 13:59:36,601 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 13:59:36,602 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ?
2025-06-25 13:59:36,602 INFO sqlalchemy.engine.Engine [cached since 28.79s ago] (datetime.datetime(2025, 5, 26, 0, 0), datetime.datetime(2025, 6, 25, 23, 59, 59), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 28.79s ago] (datetime.datetime(2025, 5, 26, 0, 0), datetime.datetime(2025, 6, 25, 23, 59, 59), '已结账')
2025-06-25 13:59:36,609 INFO sqlalchemy.engine.Engine SELECT TOP 10 [Products].[Name] AS [Products_Name], sum([BillItems].[Quantity]) AS sales, sum([BillItems].[Price] * [BillItems].[Quantity]) AS revenue 
FROM [Products] JOIN [BillItems] ON [BillItems].[ProductID] = [Products].[ProductID] JOIN [Bills] ON [Bills].[BillID] = [BillItems].[BillID] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ? GROUP BY [Products].[Name] ORDER BY sum([BillItems].[Quantity]) DESC
INFO:sqlalchemy.engine.Engine:SELECT TOP 10 [Products].[Name] AS [Products_Name], sum([BillItems].[Quantity]) AS sales, sum([BillItems].[Price] * [BillItems].[Quantity]) AS revenue 
FROM [Products] JOIN [BillItems] ON [BillItems].[ProductID] = [Products].[ProductID] JOIN [Bills] ON [Bills].[BillID] = [BillItems].[BillID] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ? GROUP BY [Products].[Name] ORDER BY sum([BillItems].[Quantity]) DESC
2025-06-25 13:59:36,611 INFO sqlalchemy.engine.Engine [cached since 28.79s ago] (datetime.datetime(2025, 5, 26, 0, 0), datetime.datetime(2025, 6, 25, 23, 59, 59), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 28.79s ago] (datetime.datetime(2025, 5, 26, 0, 0), datetime.datetime(2025, 6, 25, 23, 59, 59), '已结账')
INFO:     127.0.0.1:59765 - "GET /report/sales?start=2025-05-26&end=2025-06-25&unit=day HTTP/1.1" 200 OK
2025-06-25 13:59:36,618 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:     127.0.0.1:59765 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:59766 - "GET /health HTTP/1.1" 200 OK
2025-06-25 13:59:39,772 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 13:59:39,772 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products]) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products]) AS anon_1
2025-06-25 13:59:39,776 INFO sqlalchemy.engine.Engine [cached since 14.2s ago] ()
INFO:sqlalchemy.engine.Engine:[cached since 14.2s ago] ()
2025-06-25 13:59:39,778 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills]) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills]) AS anon_1
2025-06-25 13:59:39,778 INFO sqlalchemy.engine.Engine [cached since 14.2s ago] ()
INFO:sqlalchemy.engine.Engine:[cached since 14.2s ago] ()
2025-06-25 13:59:39,778 INFO sqlalchemy.engine.Engine SELECT sum([Products].[Stock]) AS sum_1 
FROM [Products]
INFO:sqlalchemy.engine.Engine:SELECT sum([Products].[Stock]) AS sum_1 
FROM [Products]
2025-06-25 13:59:39,778 INFO sqlalchemy.engine.Engine [cached since 14.2s ago] ()
INFO:sqlalchemy.engine.Engine:[cached since 14.2s ago] ()
2025-06-25 13:59:39,778 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products] 
WHERE [Products].[Stock] < ?) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products] 
WHERE [Products].[Stock] < ?) AS anon_1
2025-06-25 13:59:39,778 INFO sqlalchemy.engine.Engine [cached since 14.2s ago] (10,)
INFO:sqlalchemy.engine.Engine:[cached since 14.2s ago] (10,)
INFO:     127.0.0.1:59766 - "GET /stats HTTP/1.1" 200 OK
2025-06-25 13:59:39,786 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
2025-06-25 13:59:39,793 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 13:59:39,793 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products]) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products]) AS anon_1
2025-06-25 13:59:39,793 INFO sqlalchemy.engine.Engine [cached since 14.22s ago] ()
INFO:sqlalchemy.engine.Engine:[cached since 14.22s ago] ()
2025-06-25 13:59:39,793 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills]) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills]) AS anon_1
2025-06-25 13:59:39,793 INFO sqlalchemy.engine.Engine [cached since 14.21s ago] ()
INFO:sqlalchemy.engine.Engine:[cached since 14.21s ago] ()
2025-06-25 13:59:39,793 INFO sqlalchemy.engine.Engine SELECT sum([Products].[Stock]) AS sum_1 
FROM [Products]
INFO:sqlalchemy.engine.Engine:SELECT sum([Products].[Stock]) AS sum_1 
FROM [Products]
2025-06-25 13:59:39,799 INFO sqlalchemy.engine.Engine [cached since 14.21s ago] ()
INFO:sqlalchemy.engine.Engine:[cached since 14.21s ago] ()
2025-06-25 13:59:39,799 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products] 
WHERE [Products].[Stock] < ?) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products] 
WHERE [Products].[Stock] < ?) AS anon_1
2025-06-25 13:59:39,799 INFO sqlalchemy.engine.Engine [cached since 14.21s ago] (10,)
INFO:sqlalchemy.engine.Engine:[cached since 14.21s ago] (10,)
INFO:     127.0.0.1:59765 - "GET /stats HTTP/1.1" 200 OK
2025-06-25 13:59:39,799 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
2025-06-25 13:59:39,807 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 13:59:39,807 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
2025-06-25 13:59:39,807 INFO sqlalchemy.engine.Engine [cached since 14.2s ago] (datetime.datetime(2025, 6, 25, 0, 0), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 14.2s ago] (datetime.datetime(2025, 6, 25, 0, 0), '已结账')
2025-06-25 13:59:39,807 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
2025-06-25 13:59:39,807 INFO sqlalchemy.engine.Engine [cached since 14.2s ago] (datetime.datetime(2025, 6, 23, 0, 0), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 14.2s ago] (datetime.datetime(2025, 6, 23, 0, 0), '已结账')
2025-06-25 13:59:39,807 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ?
2025-06-25 13:59:39,807 INFO sqlalchemy.engine.Engine [cached since 14.2s ago] (datetime.datetime(2025, 6, 16, 0, 0), datetime.datetime(2025, 6, 22, 23, 59, 59), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 14.2s ago] (datetime.datetime(2025, 6, 16, 0, 0), datetime.datetime(2025, 6, 22, 23, 59, 59), '已结账')
2025-06-25 13:59:39,807 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
2025-06-25 13:59:39,807 INFO sqlalchemy.engine.Engine [cached since 14.21s ago] (datetime.datetime(2025, 6, 1, 0, 0), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 14.21s ago] (datetime.datetime(2025, 6, 1, 0, 0), '已结账')
INFO:     127.0.0.1:59766 - "GET /dashboard/sales HTTP/1.1" 200 OK
2025-06-25 13:59:39,822 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
2025-06-25 13:59:39,822 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 13:59:39,822 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
2025-06-25 13:59:39,822 INFO sqlalchemy.engine.Engine [cached since 14.21s ago] (datetime.datetime(2025, 6, 25, 0, 0), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 14.21s ago] (datetime.datetime(2025, 6, 25, 0, 0), '已结账')
2025-06-25 13:59:39,826 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
2025-06-25 13:59:39,826 INFO sqlalchemy.engine.Engine [cached since 14.22s ago] (datetime.datetime(2025, 6, 23, 0, 0), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 14.22s ago] (datetime.datetime(2025, 6, 23, 0, 0), '已结账')
2025-06-25 13:59:39,826 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 13:59:39,826 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ?
2025-06-25 13:59:39,826 INFO sqlalchemy.engine.Engine SELECT TOP 5 [Products].[Name] AS [Products_Name], sum([BillItems].[Quantity]) AS sales 
FROM [Products] JOIN [BillItems] ON [BillItems].[ProductID] = [Products].[ProductID] JOIN [Bills] ON [Bills].[BillID] = [BillItems].[BillID] 
WHERE [Bills].[Status] = ? GROUP BY [Products].[Name] ORDER BY sum([BillItems].[Quantity]) DESC
INFO:sqlalchemy.engine.Engine:SELECT TOP 5 [Products].[Name] AS [Products_Name], sum([BillItems].[Quantity]) AS sales 
FROM [Products] JOIN [BillItems] ON [BillItems].[ProductID] = [Products].[ProductID] JOIN [Bills] ON [Bills].[BillID] = [BillItems].[BillID] 
WHERE [Bills].[Status] = ? GROUP BY [Products].[Name] ORDER BY sum([BillItems].[Quantity]) DESC
2025-06-25 13:59:39,826 INFO sqlalchemy.engine.Engine [cached since 14.21s ago] (datetime.datetime(2025, 6, 16, 0, 0), datetime.datetime(2025, 6, 22, 23, 59, 59), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 14.21s ago] (datetime.datetime(2025, 6, 16, 0, 0), datetime.datetime(2025, 6, 22, 23, 59, 59), '已结账')
2025-06-25 13:59:39,826 INFO sqlalchemy.engine.Engine [cached since 14.19s ago] ('已结账',)
INFO:sqlalchemy.engine.Engine:[cached since 14.19s ago] ('已结账',)
2025-06-25 13:59:39,826 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
2025-06-25 13:59:39,826 INFO sqlalchemy.engine.Engine [cached since 14.22s ago] (datetime.datetime(2025, 6, 1, 0, 0), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 14.22s ago] (datetime.datetime(2025, 6, 1, 0, 0), '已结账')
INFO:     127.0.0.1:59765 - "GET /dashboard/sales HTTP/1.1" 200 OK
2025-06-25 13:59:39,826 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:     127.0.0.1:59766 - "GET /dashboard/top-products?limit=5 HTTP/1.1" 200 OK
2025-06-25 13:59:39,838 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
2025-06-25 13:59:39,838 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 13:59:39,838 INFO sqlalchemy.engine.Engine SELECT TOP 5 [Products].[Name] AS [Products_Name], sum([BillItems].[Quantity]) AS sales 
FROM [Products] JOIN [BillItems] ON [BillItems].[ProductID] = [Products].[ProductID] JOIN [Bills] ON [Bills].[BillID] = [BillItems].[BillID] 
WHERE [Bills].[Status] = ? GROUP BY [Products].[Name] ORDER BY sum([BillItems].[Quantity]) DESC
INFO:sqlalchemy.engine.Engine:SELECT TOP 5 [Products].[Name] AS [Products_Name], sum([BillItems].[Quantity]) AS sales 
FROM [Products] JOIN [BillItems] ON [BillItems].[ProductID] = [Products].[ProductID] JOIN [Bills] ON [Bills].[BillID] = [BillItems].[BillID] 
WHERE [Bills].[Status] = ? GROUP BY [Products].[Name] ORDER BY sum([BillItems].[Quantity]) DESC
2025-06-25 13:59:39,843 INFO sqlalchemy.engine.Engine [cached since 14.2s ago] ('已结账',)
INFO:sqlalchemy.engine.Engine:[cached since 14.2s ago] ('已结账',)
INFO:     127.0.0.1:59765 - "GET /dashboard/top-products?limit=5 HTTP/1.1" 200 OK
2025-06-25 13:59:39,849 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:     127.0.0.1:59767 - "GET /health HTTP/1.1" 200 OK
2025-06-25 13:59:50,310 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 13:59:50,314 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products]) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products]) AS anon_1
2025-06-25 13:59:50,315 INFO sqlalchemy.engine.Engine [cached since 24.74s ago] ()
INFO:sqlalchemy.engine.Engine:[cached since 24.74s ago] ()
2025-06-25 13:59:50,318 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills]) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills]) AS anon_1
2025-06-25 13:59:50,319 INFO sqlalchemy.engine.Engine [cached since 24.74s ago] ()
INFO:sqlalchemy.engine.Engine:[cached since 24.74s ago] ()
2025-06-25 13:59:50,322 INFO sqlalchemy.engine.Engine SELECT sum([Products].[Stock]) AS sum_1 
FROM [Products]
INFO:sqlalchemy.engine.Engine:SELECT sum([Products].[Stock]) AS sum_1 
FROM [Products]
2025-06-25 13:59:50,322 INFO sqlalchemy.engine.Engine [cached since 24.74s ago] ()
INFO:sqlalchemy.engine.Engine:[cached since 24.74s ago] ()
2025-06-25 13:59:50,322 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products] 
WHERE [Products].[Stock] < ?) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products] 
WHERE [Products].[Stock] < ?) AS anon_1
2025-06-25 13:59:50,322 INFO sqlalchemy.engine.Engine [cached since 24.73s ago] (10,)
INFO:sqlalchemy.engine.Engine:[cached since 24.73s ago] (10,)
INFO:     127.0.0.1:59767 - "GET /stats HTTP/1.1" 200 OK
2025-06-25 13:59:50,326 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
2025-06-25 13:59:50,334 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 13:59:50,335 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
2025-06-25 13:59:50,335 INFO sqlalchemy.engine.Engine [cached since 24.72s ago] (datetime.datetime(2025, 6, 25, 0, 0), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 24.72s ago] (datetime.datetime(2025, 6, 25, 0, 0), '已结账')
2025-06-25 13:59:50,339 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
2025-06-25 13:59:50,339 INFO sqlalchemy.engine.Engine [cached since 24.73s ago] (datetime.datetime(2025, 6, 23, 0, 0), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 24.73s ago] (datetime.datetime(2025, 6, 23, 0, 0), '已结账')
2025-06-25 13:59:50,339 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ?
2025-06-25 13:59:50,339 INFO sqlalchemy.engine.Engine [cached since 24.72s ago] (datetime.datetime(2025, 6, 16, 0, 0), datetime.datetime(2025, 6, 22, 23, 59, 59), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 24.72s ago] (datetime.datetime(2025, 6, 16, 0, 0), datetime.datetime(2025, 6, 22, 23, 59, 59), '已结账')
2025-06-25 13:59:50,343 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
2025-06-25 13:59:50,343 INFO sqlalchemy.engine.Engine [cached since 24.73s ago] (datetime.datetime(2025, 6, 1, 0, 0), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 24.73s ago] (datetime.datetime(2025, 6, 1, 0, 0), '已结账')
INFO:     127.0.0.1:59767 - "GET /dashboard/sales HTTP/1.1" 200 OK
2025-06-25 13:59:50,347 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
2025-06-25 13:59:50,351 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 13:59:50,351 INFO sqlalchemy.engine.Engine SELECT TOP 5 [Products].[Name] AS [Products_Name], sum([BillItems].[Quantity]) AS sales 
FROM [Products] JOIN [BillItems] ON [BillItems].[ProductID] = [Products].[ProductID] JOIN [Bills] ON [Bills].[BillID] = [BillItems].[BillID] 
WHERE [Bills].[Status] = ? GROUP BY [Products].[Name] ORDER BY sum([BillItems].[Quantity]) DESC
INFO:sqlalchemy.engine.Engine:SELECT TOP 5 [Products].[Name] AS [Products_Name], sum([BillItems].[Quantity]) AS sales 
FROM [Products] JOIN [BillItems] ON [BillItems].[ProductID] = [Products].[ProductID] JOIN [Bills] ON [Bills].[BillID] = [BillItems].[BillID] 
WHERE [Bills].[Status] = ? GROUP BY [Products].[Name] ORDER BY sum([BillItems].[Quantity]) DESC
2025-06-25 13:59:50,351 INFO sqlalchemy.engine.Engine [cached since 24.71s ago] ('已结账',)
INFO:sqlalchemy.engine.Engine:[cached since 24.71s ago] ('已结账',)
INFO:     127.0.0.1:59767 - "GET /dashboard/top-products?limit=5 HTTP/1.1" 200 OK
2025-06-25 13:59:50,360 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:     127.0.0.1:59767 - "GET /health HTTP/1.1" 200 OK
2025-06-25 13:59:53,191 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 13:59:53,191 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products]) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products]) AS anon_1
2025-06-25 13:59:53,191 INFO sqlalchemy.engine.Engine [cached since 27.61s ago] ()
INFO:sqlalchemy.engine.Engine:[cached since 27.61s ago] ()
2025-06-25 13:59:53,194 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills]) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills]) AS anon_1
2025-06-25 13:59:53,194 INFO sqlalchemy.engine.Engine [cached since 27.61s ago] ()
INFO:sqlalchemy.engine.Engine:[cached since 27.61s ago] ()
2025-06-25 13:59:53,195 INFO sqlalchemy.engine.Engine SELECT sum([Products].[Stock]) AS sum_1 
FROM [Products]
INFO:sqlalchemy.engine.Engine:SELECT sum([Products].[Stock]) AS sum_1 
FROM [Products]
2025-06-25 13:59:53,195 INFO sqlalchemy.engine.Engine [cached since 27.61s ago] ()
INFO:sqlalchemy.engine.Engine:[cached since 27.61s ago] ()
2025-06-25 13:59:53,195 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products] 
WHERE [Products].[Stock] < ?) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products] 
WHERE [Products].[Stock] < ?) AS anon_1
2025-06-25 13:59:53,195 INFO sqlalchemy.engine.Engine [cached since 27.61s ago] (10,)
INFO:sqlalchemy.engine.Engine:[cached since 27.61s ago] (10,)
INFO:     127.0.0.1:59767 - "GET /stats HTTP/1.1" 200 OK
2025-06-25 13:59:53,198 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
2025-06-25 13:59:53,206 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 13:59:53,206 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
2025-06-25 13:59:53,206 INFO sqlalchemy.engine.Engine [cached since 27.6s ago] (datetime.datetime(2025, 6, 25, 0, 0), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 27.6s ago] (datetime.datetime(2025, 6, 25, 0, 0), '已结账')
2025-06-25 13:59:53,210 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
2025-06-25 13:59:53,210 INFO sqlalchemy.engine.Engine [cached since 27.6s ago] (datetime.datetime(2025, 6, 23, 0, 0), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 27.6s ago] (datetime.datetime(2025, 6, 23, 0, 0), '已结账')
2025-06-25 13:59:53,210 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ?
2025-06-25 13:59:53,210 INFO sqlalchemy.engine.Engine [cached since 27.59s ago] (datetime.datetime(2025, 6, 16, 0, 0), datetime.datetime(2025, 6, 22, 23, 59, 59), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 27.59s ago] (datetime.datetime(2025, 6, 16, 0, 0), datetime.datetime(2025, 6, 22, 23, 59, 59), '已结账')
2025-06-25 13:59:53,214 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
2025-06-25 13:59:53,214 INFO sqlalchemy.engine.Engine [cached since 27.6s ago] (datetime.datetime(2025, 6, 1, 0, 0), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 27.6s ago] (datetime.datetime(2025, 6, 1, 0, 0), '已结账')
INFO:     127.0.0.1:59767 - "GET /dashboard/sales HTTP/1.1" 200 OK
2025-06-25 13:59:53,214 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
2025-06-25 13:59:53,222 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 13:59:53,222 INFO sqlalchemy.engine.Engine SELECT TOP 5 [Products].[Name] AS [Products_Name], sum([BillItems].[Quantity]) AS sales 
FROM [Products] JOIN [BillItems] ON [BillItems].[ProductID] = [Products].[ProductID] JOIN [Bills] ON [Bills].[BillID] = [BillItems].[BillID] 
WHERE [Bills].[Status] = ? GROUP BY [Products].[Name] ORDER BY sum([BillItems].[Quantity]) DESC
INFO:sqlalchemy.engine.Engine:SELECT TOP 5 [Products].[Name] AS [Products_Name], sum([BillItems].[Quantity]) AS sales 
FROM [Products] JOIN [BillItems] ON [BillItems].[ProductID] = [Products].[ProductID] JOIN [Bills] ON [Bills].[BillID] = [BillItems].[BillID] 
WHERE [Bills].[Status] = ? GROUP BY [Products].[Name] ORDER BY sum([BillItems].[Quantity]) DESC
2025-06-25 13:59:53,222 INFO sqlalchemy.engine.Engine [cached since 27.58s ago] ('已结账',)
INFO:sqlalchemy.engine.Engine:[cached since 27.58s ago] ('已结账',)
INFO:     127.0.0.1:59767 - "GET /dashboard/top-products?limit=5 HTTP/1.1" 200 OK
2025-06-25 13:59:53,227 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:     127.0.0.1:59767 - "GET /health HTTP/1.1" 200 OK
2025-06-25 13:59:57,654 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 13:59:57,655 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products]) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products]) AS anon_1
2025-06-25 13:59:57,655 INFO sqlalchemy.engine.Engine [cached since 32.08s ago] ()
INFO:sqlalchemy.engine.Engine:[cached since 32.08s ago] ()
2025-06-25 13:59:57,656 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills]) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills]) AS anon_1
2025-06-25 13:59:57,656 INFO sqlalchemy.engine.Engine [cached since 32.07s ago] ()
INFO:sqlalchemy.engine.Engine:[cached since 32.07s ago] ()
2025-06-25 13:59:57,656 INFO sqlalchemy.engine.Engine SELECT sum([Products].[Stock]) AS sum_1 
FROM [Products]
INFO:sqlalchemy.engine.Engine:SELECT sum([Products].[Stock]) AS sum_1 
FROM [Products]
2025-06-25 13:59:57,656 INFO sqlalchemy.engine.Engine [cached since 32.07s ago] ()
INFO:sqlalchemy.engine.Engine:[cached since 32.07s ago] ()
2025-06-25 13:59:57,660 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products] 
WHERE [Products].[Stock] < ?) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products] 
WHERE [Products].[Stock] < ?) AS anon_1
2025-06-25 13:59:57,660 INFO sqlalchemy.engine.Engine [cached since 32.07s ago] (10,)
INFO:sqlalchemy.engine.Engine:[cached since 32.07s ago] (10,)
INFO:     127.0.0.1:59767 - "GET /stats HTTP/1.1" 200 OK
2025-06-25 13:59:57,660 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
2025-06-25 13:59:57,668 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 13:59:57,668 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
2025-06-25 13:59:57,668 INFO sqlalchemy.engine.Engine [cached since 32.06s ago] (datetime.datetime(2025, 6, 25, 0, 0), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 32.06s ago] (datetime.datetime(2025, 6, 25, 0, 0), '已结账')
2025-06-25 13:59:57,672 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
2025-06-25 13:59:57,672 INFO sqlalchemy.engine.Engine [cached since 32.06s ago] (datetime.datetime(2025, 6, 23, 0, 0), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 32.06s ago] (datetime.datetime(2025, 6, 23, 0, 0), '已结账')
2025-06-25 13:59:57,672 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ?
2025-06-25 13:59:57,672 INFO sqlalchemy.engine.Engine [cached since 32.06s ago] (datetime.datetime(2025, 6, 16, 0, 0), datetime.datetime(2025, 6, 22, 23, 59, 59), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 32.06s ago] (datetime.datetime(2025, 6, 16, 0, 0), datetime.datetime(2025, 6, 22, 23, 59, 59), '已结账')
2025-06-25 13:59:57,672 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
2025-06-25 13:59:57,672 INFO sqlalchemy.engine.Engine [cached since 32.07s ago] (datetime.datetime(2025, 6, 1, 0, 0), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 32.07s ago] (datetime.datetime(2025, 6, 1, 0, 0), '已结账')
INFO:     127.0.0.1:59767 - "GET /dashboard/sales HTTP/1.1" 200 OK
2025-06-25 13:59:57,672 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
2025-06-25 13:59:57,681 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 13:59:57,681 INFO sqlalchemy.engine.Engine SELECT TOP 5 [Products].[Name] AS [Products_Name], sum([BillItems].[Quantity]) AS sales 
FROM [Products] JOIN [BillItems] ON [BillItems].[ProductID] = [Products].[ProductID] JOIN [Bills] ON [Bills].[BillID] = [BillItems].[BillID] 
WHERE [Bills].[Status] = ? GROUP BY [Products].[Name] ORDER BY sum([BillItems].[Quantity]) DESC
INFO:sqlalchemy.engine.Engine:SELECT TOP 5 [Products].[Name] AS [Products_Name], sum([BillItems].[Quantity]) AS sales 
FROM [Products] JOIN [BillItems] ON [BillItems].[ProductID] = [Products].[ProductID] JOIN [Bills] ON [Bills].[BillID] = [BillItems].[BillID] 
WHERE [Bills].[Status] = ? GROUP BY [Products].[Name] ORDER BY sum([BillItems].[Quantity]) DESC
2025-06-25 13:59:57,681 INFO sqlalchemy.engine.Engine [cached since 32.05s ago] ('已结账',)
INFO:sqlalchemy.engine.Engine:[cached since 32.05s ago] ('已结账',)
INFO:     127.0.0.1:59767 - "GET /dashboard/top-products?limit=5 HTTP/1.1" 200 OK
2025-06-25 13:59:57,689 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:     127.0.0.1:57456 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:57456 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:57456 - "GET /health HTTP/1.1" 200 OK
2025-06-25 14:01:40,744 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 14:01:40,744 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products]) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products]) AS anon_1
2025-06-25 14:01:40,744 INFO sqlalchemy.engine.Engine [cached since 135.2s ago] ()
INFO:sqlalchemy.engine.Engine:[cached since 135.2s ago] ()
2025-06-25 14:01:40,748 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills]) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills]) AS anon_1
2025-06-25 14:01:40,748 INFO sqlalchemy.engine.Engine [cached since 135.2s ago] ()
INFO:sqlalchemy.engine.Engine:[cached since 135.2s ago] ()
2025-06-25 14:01:40,753 INFO sqlalchemy.engine.Engine SELECT sum([Products].[Stock]) AS sum_1 
FROM [Products]
INFO:sqlalchemy.engine.Engine:SELECT sum([Products].[Stock]) AS sum_1 
FROM [Products]
2025-06-25 14:01:40,753 INFO sqlalchemy.engine.Engine [cached since 135.2s ago] ()
INFO:sqlalchemy.engine.Engine:[cached since 135.2s ago] ()
2025-06-25 14:01:40,755 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products] 
WHERE [Products].[Stock] < ?) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products] 
WHERE [Products].[Stock] < ?) AS anon_1
2025-06-25 14:01:40,755 INFO sqlalchemy.engine.Engine [cached since 135.2s ago] (10,)
INFO:sqlalchemy.engine.Engine:[cached since 135.2s ago] (10,)
INFO:     127.0.0.1:57456 - "GET /stats HTTP/1.1" 200 OK
2025-06-25 14:01:40,758 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:     127.0.0.1:57456 - "GET /health HTTP/1.1" 200 OK
2025-06-25 14:01:40,764 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 14:01:40,764 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products]) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products]) AS anon_1
2025-06-25 14:01:40,764 INFO sqlalchemy.engine.Engine [cached since 135.2s ago] ()
INFO:sqlalchemy.engine.Engine:[cached since 135.2s ago] ()
2025-06-25 14:01:40,764 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills]) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills]) AS anon_1
2025-06-25 14:01:40,764 INFO sqlalchemy.engine.Engine [cached since 135.2s ago] ()
INFO:sqlalchemy.engine.Engine:[cached since 135.2s ago] ()
2025-06-25 14:01:40,764 INFO sqlalchemy.engine.Engine SELECT sum([Products].[Stock]) AS sum_1 
FROM [Products]
INFO:sqlalchemy.engine.Engine:SELECT sum([Products].[Stock]) AS sum_1 
FROM [Products]
2025-06-25 14:01:40,764 INFO sqlalchemy.engine.Engine [cached since 135.2s ago] ()
INFO:sqlalchemy.engine.Engine:[cached since 135.2s ago] ()
2025-06-25 14:01:40,764 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products] 
WHERE [Products].[Stock] < ?) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products] 
WHERE [Products].[Stock] < ?) AS anon_1
2025-06-25 14:01:40,764 INFO sqlalchemy.engine.Engine [cached since 135.2s ago] (10,)
INFO:sqlalchemy.engine.Engine:[cached since 135.2s ago] (10,)
INFO:     127.0.0.1:57456 - "GET /stats HTTP/1.1" 200 OK
2025-06-25 14:01:40,764 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
2025-06-25 14:01:40,764 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 14:01:40,764 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
2025-06-25 14:01:40,764 INFO sqlalchemy.engine.Engine [cached since 135.2s ago] (datetime.datetime(2025, 6, 25, 0, 0), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 135.2s ago] (datetime.datetime(2025, 6, 25, 0, 0), '已结账')
2025-06-25 14:01:40,764 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
2025-06-25 14:01:40,764 INFO sqlalchemy.engine.Engine [cached since 135.2s ago] (datetime.datetime(2025, 6, 23, 0, 0), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 135.2s ago] (datetime.datetime(2025, 6, 23, 0, 0), '已结账')
2025-06-25 14:01:40,764 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ?
2025-06-25 14:01:40,764 INFO sqlalchemy.engine.Engine [cached since 135.2s ago] (datetime.datetime(2025, 6, 16, 0, 0), datetime.datetime(2025, 6, 22, 23, 59, 59), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 135.2s ago] (datetime.datetime(2025, 6, 16, 0, 0), datetime.datetime(2025, 6, 22, 23, 59, 59), '已结账')
2025-06-25 14:01:40,779 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
2025-06-25 14:01:40,779 INFO sqlalchemy.engine.Engine [cached since 135.2s ago] (datetime.datetime(2025, 6, 1, 0, 0), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 135.2s ago] (datetime.datetime(2025, 6, 1, 0, 0), '已结账')
INFO:     127.0.0.1:57456 - "GET /dashboard/sales HTTP/1.1" 200 OK
2025-06-25 14:01:40,779 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
2025-06-25 14:01:40,779 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 14:01:40,779 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products]) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products]) AS anon_1
2025-06-25 14:01:40,779 INFO sqlalchemy.engine.Engine [cached since 135.2s ago] ()
INFO:sqlalchemy.engine.Engine:[cached since 135.2s ago] ()
2025-06-25 14:01:40,779 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills]) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills]) AS anon_1
2025-06-25 14:01:40,779 INFO sqlalchemy.engine.Engine [cached since 135.2s ago] ()
INFO:sqlalchemy.engine.Engine:[cached since 135.2s ago] ()
2025-06-25 14:01:40,779 INFO sqlalchemy.engine.Engine SELECT sum([Products].[Stock]) AS sum_1 
FROM [Products]
INFO:sqlalchemy.engine.Engine:SELECT sum([Products].[Stock]) AS sum_1 
FROM [Products]
2025-06-25 14:01:40,779 INFO sqlalchemy.engine.Engine [cached since 135.2s ago] ()
INFO:sqlalchemy.engine.Engine:[cached since 135.2s ago] ()
2025-06-25 14:01:40,779 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products] 
WHERE [Products].[Stock] < ?) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products] 
WHERE [Products].[Stock] < ?) AS anon_1
2025-06-25 14:01:40,779 INFO sqlalchemy.engine.Engine [cached since 135.2s ago] (10,)
INFO:sqlalchemy.engine.Engine:[cached since 135.2s ago] (10,)
INFO:     127.0.0.1:57456 - "GET /stats HTTP/1.1" 200 OK
2025-06-25 14:01:40,779 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
2025-06-25 14:01:40,779 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 14:01:40,795 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
2025-06-25 14:01:40,795 INFO sqlalchemy.engine.Engine [cached since 135.2s ago] (datetime.datetime(2025, 6, 25, 0, 0), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 135.2s ago] (datetime.datetime(2025, 6, 25, 0, 0), '已结账')
2025-06-25 14:01:40,795 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
2025-06-25 14:01:40,795 INFO sqlalchemy.engine.Engine [cached since 135.2s ago] (datetime.datetime(2025, 6, 23, 0, 0), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 135.2s ago] (datetime.datetime(2025, 6, 23, 0, 0), '已结账')
2025-06-25 14:01:40,795 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ?
2025-06-25 14:01:40,795 INFO sqlalchemy.engine.Engine [cached since 135.2s ago] (datetime.datetime(2025, 6, 16, 0, 0), datetime.datetime(2025, 6, 22, 23, 59, 59), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 135.2s ago] (datetime.datetime(2025, 6, 16, 0, 0), datetime.datetime(2025, 6, 22, 23, 59, 59), '已结账')
2025-06-25 14:01:40,795 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
2025-06-25 14:01:40,795 INFO sqlalchemy.engine.Engine [cached since 135.2s ago] (datetime.datetime(2025, 6, 1, 0, 0), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 135.2s ago] (datetime.datetime(2025, 6, 1, 0, 0), '已结账')
INFO:     127.0.0.1:57456 - "GET /dashboard/sales HTTP/1.1" 200 OK
2025-06-25 14:01:40,795 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
2025-06-25 14:01:40,795 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 14:01:40,795 INFO sqlalchemy.engine.Engine SELECT TOP 5 [Products].[Name] AS [Products_Name], sum([BillItems].[Quantity]) AS sales 
FROM [Products] JOIN [BillItems] ON [BillItems].[ProductID] = [Products].[ProductID] JOIN [Bills] ON [Bills].[BillID] = [BillItems].[BillID] 
WHERE [Bills].[Status] = ? GROUP BY [Products].[Name] ORDER BY sum([BillItems].[Quantity]) DESC
INFO:sqlalchemy.engine.Engine:SELECT TOP 5 [Products].[Name] AS [Products_Name], sum([BillItems].[Quantity]) AS sales 
FROM [Products] JOIN [BillItems] ON [BillItems].[ProductID] = [Products].[ProductID] JOIN [Bills] ON [Bills].[BillID] = [BillItems].[BillID] 
WHERE [Bills].[Status] = ? GROUP BY [Products].[Name] ORDER BY sum([BillItems].[Quantity]) DESC
2025-06-25 14:01:40,795 INFO sqlalchemy.engine.Engine [cached since 135.2s ago] ('已结账',)
INFO:sqlalchemy.engine.Engine:[cached since 135.2s ago] ('已结账',)
INFO:     127.0.0.1:57456 - "GET /dashboard/top-products?limit=5 HTTP/1.1" 200 OK
2025-06-25 14:01:40,811 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
2025-06-25 14:01:40,811 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 14:01:40,811 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products]) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products]) AS anon_1
2025-06-25 14:01:40,811 INFO sqlalchemy.engine.Engine [cached since 135.2s ago] ()
INFO:sqlalchemy.engine.Engine:[cached since 135.2s ago] ()
2025-06-25 14:01:40,811 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills]) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills]) AS anon_1
2025-06-25 14:01:40,811 INFO sqlalchemy.engine.Engine [cached since 135.2s ago] ()
INFO:sqlalchemy.engine.Engine:[cached since 135.2s ago] ()
2025-06-25 14:01:40,811 INFO sqlalchemy.engine.Engine SELECT sum([Products].[Stock]) AS sum_1 
FROM [Products]
INFO:sqlalchemy.engine.Engine:SELECT sum([Products].[Stock]) AS sum_1 
FROM [Products]
2025-06-25 14:01:40,811 INFO sqlalchemy.engine.Engine [cached since 135.2s ago] ()
INFO:sqlalchemy.engine.Engine:[cached since 135.2s ago] ()
2025-06-25 14:01:40,811 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products] 
WHERE [Products].[Stock] < ?) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products] 
WHERE [Products].[Stock] < ?) AS anon_1
2025-06-25 14:01:40,811 INFO sqlalchemy.engine.Engine [cached since 135.2s ago] (10,)
INFO:sqlalchemy.engine.Engine:[cached since 135.2s ago] (10,)
INFO:     127.0.0.1:57456 - "GET /stats HTTP/1.1" 200 OK
2025-06-25 14:01:40,811 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
2025-06-25 14:01:40,811 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 14:01:40,811 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
2025-06-25 14:01:40,811 INFO sqlalchemy.engine.Engine [cached since 135.2s ago] (datetime.datetime(2025, 6, 25, 0, 0), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 135.2s ago] (datetime.datetime(2025, 6, 25, 0, 0), '已结账')
2025-06-25 14:01:40,811 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
2025-06-25 14:01:40,811 INFO sqlalchemy.engine.Engine [cached since 135.2s ago] (datetime.datetime(2025, 6, 23, 0, 0), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 135.2s ago] (datetime.datetime(2025, 6, 23, 0, 0), '已结账')
2025-06-25 14:01:40,827 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ?
2025-06-25 14:01:40,827 INFO sqlalchemy.engine.Engine [cached since 135.2s ago] (datetime.datetime(2025, 6, 16, 0, 0), datetime.datetime(2025, 6, 22, 23, 59, 59), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 135.2s ago] (datetime.datetime(2025, 6, 16, 0, 0), datetime.datetime(2025, 6, 22, 23, 59, 59), '已结账')
2025-06-25 14:01:40,827 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
2025-06-25 14:01:40,827 INFO sqlalchemy.engine.Engine [cached since 135.2s ago] (datetime.datetime(2025, 6, 1, 0, 0), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 135.2s ago] (datetime.datetime(2025, 6, 1, 0, 0), '已结账')
INFO:     127.0.0.1:57456 - "GET /dashboard/sales HTTP/1.1" 200 OK
2025-06-25 14:01:40,827 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
2025-06-25 14:01:40,827 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 14:01:40,827 INFO sqlalchemy.engine.Engine SELECT TOP 5 [Products].[Name] AS [Products_Name], sum([BillItems].[Quantity]) AS sales 
FROM [Products] JOIN [BillItems] ON [BillItems].[ProductID] = [Products].[ProductID] JOIN [Bills] ON [Bills].[BillID] = [BillItems].[BillID] 
WHERE [Bills].[Status] = ? GROUP BY [Products].[Name] ORDER BY sum([BillItems].[Quantity]) DESC
INFO:sqlalchemy.engine.Engine:SELECT TOP 5 [Products].[Name] AS [Products_Name], sum([BillItems].[Quantity]) AS sales 
FROM [Products] JOIN [BillItems] ON [BillItems].[ProductID] = [Products].[ProductID] JOIN [Bills] ON [Bills].[BillID] = [BillItems].[BillID] 
WHERE [Bills].[Status] = ? GROUP BY [Products].[Name] ORDER BY sum([BillItems].[Quantity]) DESC
2025-06-25 14:01:40,827 INFO sqlalchemy.engine.Engine [cached since 135.2s ago] ('已结账',)
INFO:sqlalchemy.engine.Engine:[cached since 135.2s ago] ('已结账',)
INFO:     127.0.0.1:57456 - "GET /dashboard/top-products?limit=5 HTTP/1.1" 200 OK
2025-06-25 14:01:40,827 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
2025-06-25 14:01:40,827 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 14:01:40,827 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
2025-06-25 14:01:40,827 INFO sqlalchemy.engine.Engine [cached since 135.2s ago] (datetime.datetime(2025, 6, 25, 0, 0), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 135.2s ago] (datetime.datetime(2025, 6, 25, 0, 0), '已结账')
2025-06-25 14:01:40,827 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
2025-06-25 14:01:40,827 INFO sqlalchemy.engine.Engine [cached since 135.2s ago] (datetime.datetime(2025, 6, 23, 0, 0), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 135.2s ago] (datetime.datetime(2025, 6, 23, 0, 0), '已结账')
2025-06-25 14:01:40,827 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ?
2025-06-25 14:01:40,827 INFO sqlalchemy.engine.Engine [cached since 135.2s ago] (datetime.datetime(2025, 6, 16, 0, 0), datetime.datetime(2025, 6, 22, 23, 59, 59), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 135.2s ago] (datetime.datetime(2025, 6, 16, 0, 0), datetime.datetime(2025, 6, 22, 23, 59, 59), '已结账')
2025-06-25 14:01:40,843 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
2025-06-25 14:01:40,843 INFO sqlalchemy.engine.Engine [cached since 135.2s ago] (datetime.datetime(2025, 6, 1, 0, 0), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 135.2s ago] (datetime.datetime(2025, 6, 1, 0, 0), '已结账')
INFO:     127.0.0.1:57456 - "GET /dashboard/sales HTTP/1.1" 200 OK
2025-06-25 14:01:40,843 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
2025-06-25 14:01:40,843 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 14:01:40,843 INFO sqlalchemy.engine.Engine SELECT TOP 5 [Products].[Name] AS [Products_Name], sum([BillItems].[Quantity]) AS sales 
FROM [Products] JOIN [BillItems] ON [BillItems].[ProductID] = [Products].[ProductID] JOIN [Bills] ON [Bills].[BillID] = [BillItems].[BillID] 
WHERE [Bills].[Status] = ? GROUP BY [Products].[Name] ORDER BY sum([BillItems].[Quantity]) DESC
INFO:sqlalchemy.engine.Engine:SELECT TOP 5 [Products].[Name] AS [Products_Name], sum([BillItems].[Quantity]) AS sales 
FROM [Products] JOIN [BillItems] ON [BillItems].[ProductID] = [Products].[ProductID] JOIN [Bills] ON [Bills].[BillID] = [BillItems].[BillID] 
WHERE [Bills].[Status] = ? GROUP BY [Products].[Name] ORDER BY sum([BillItems].[Quantity]) DESC
2025-06-25 14:01:40,843 INFO sqlalchemy.engine.Engine [cached since 135.2s ago] ('已结账',)
INFO:sqlalchemy.engine.Engine:[cached since 135.2s ago] ('已结账',)
INFO:     127.0.0.1:57456 - "GET /dashboard/top-products?limit=5 HTTP/1.1" 200 OK
2025-06-25 14:01:40,843 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
2025-06-25 14:01:40,843 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 14:01:40,843 INFO sqlalchemy.engine.Engine SELECT TOP 5 [Products].[Name] AS [Products_Name], sum([BillItems].[Quantity]) AS sales 
FROM [Products] JOIN [BillItems] ON [BillItems].[ProductID] = [Products].[ProductID] JOIN [Bills] ON [Bills].[BillID] = [BillItems].[BillID] 
WHERE [Bills].[Status] = ? GROUP BY [Products].[Name] ORDER BY sum([BillItems].[Quantity]) DESC
INFO:sqlalchemy.engine.Engine:SELECT TOP 5 [Products].[Name] AS [Products_Name], sum([BillItems].[Quantity]) AS sales 
FROM [Products] JOIN [BillItems] ON [BillItems].[ProductID] = [Products].[ProductID] JOIN [Bills] ON [Bills].[BillID] = [BillItems].[BillID] 
WHERE [Bills].[Status] = ? GROUP BY [Products].[Name] ORDER BY sum([BillItems].[Quantity]) DESC
2025-06-25 14:01:40,843 INFO sqlalchemy.engine.Engine [cached since 135.2s ago] ('已结账',)
INFO:sqlalchemy.engine.Engine:[cached since 135.2s ago] ('已结账',)
INFO:     127.0.0.1:57456 - "GET /dashboard/top-products?limit=5 HTTP/1.1" 200 OK
2025-06-25 14:01:40,843 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:     127.0.0.1:61921 - "OPTIONS /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:61921 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:61921 - "OPTIONS /stats HTTP/1.1" 200 OK
2025-06-25 14:03:29,014 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 14:03:29,015 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products]) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products]) AS anon_1
2025-06-25 14:03:29,015 INFO sqlalchemy.engine.Engine [cached since 243.4s ago] ()
INFO:sqlalchemy.engine.Engine:[cached since 243.4s ago] ()
2025-06-25 14:03:29,019 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills]) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills]) AS anon_1
2025-06-25 14:03:29,019 INFO sqlalchemy.engine.Engine [cached since 243.4s ago] ()
INFO:sqlalchemy.engine.Engine:[cached since 243.4s ago] ()
2025-06-25 14:03:29,021 INFO sqlalchemy.engine.Engine SELECT sum([Products].[Stock]) AS sum_1 
FROM [Products]
INFO:sqlalchemy.engine.Engine:SELECT sum([Products].[Stock]) AS sum_1 
FROM [Products]
2025-06-25 14:03:29,021 INFO sqlalchemy.engine.Engine [cached since 243.4s ago] ()
INFO:sqlalchemy.engine.Engine:[cached since 243.4s ago] ()
2025-06-25 14:03:29,021 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products] 
WHERE [Products].[Stock] < ?) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products] 
WHERE [Products].[Stock] < ?) AS anon_1
2025-06-25 14:03:29,021 INFO sqlalchemy.engine.Engine [cached since 243.4s ago] (10,)
INFO:sqlalchemy.engine.Engine:[cached since 243.4s ago] (10,)
INFO:     127.0.0.1:61921 - "GET /stats HTTP/1.1" 200 OK
2025-06-25 14:03:29,021 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:     127.0.0.1:61921 - "OPTIONS /dashboard/sales HTTP/1.1" 200 OK
2025-06-25 14:03:29,021 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 14:03:29,021 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
2025-06-25 14:03:29,021 INFO sqlalchemy.engine.Engine [cached since 243.4s ago] (datetime.datetime(2025, 6, 25, 0, 0), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 243.4s ago] (datetime.datetime(2025, 6, 25, 0, 0), '已结账')
2025-06-25 14:03:29,037 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
2025-06-25 14:03:29,039 INFO sqlalchemy.engine.Engine [cached since 243.4s ago] (datetime.datetime(2025, 6, 23, 0, 0), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 243.4s ago] (datetime.datetime(2025, 6, 23, 0, 0), '已结账')
2025-06-25 14:03:29,039 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ?
2025-06-25 14:03:29,039 INFO sqlalchemy.engine.Engine [cached since 243.4s ago] (datetime.datetime(2025, 6, 16, 0, 0), datetime.datetime(2025, 6, 22, 23, 59, 59), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 243.4s ago] (datetime.datetime(2025, 6, 16, 0, 0), datetime.datetime(2025, 6, 22, 23, 59, 59), '已结账')
2025-06-25 14:03:29,042 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
2025-06-25 14:03:29,042 INFO sqlalchemy.engine.Engine [cached since 243.4s ago] (datetime.datetime(2025, 6, 1, 0, 0), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 243.4s ago] (datetime.datetime(2025, 6, 1, 0, 0), '已结账')
INFO:     127.0.0.1:61921 - "GET /dashboard/sales HTTP/1.1" 200 OK
2025-06-25 14:03:29,042 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:     127.0.0.1:61921 - "OPTIONS /dashboard/top-products?limit=5 HTTP/1.1" 200 OK
2025-06-25 14:03:29,051 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 14:03:29,051 INFO sqlalchemy.engine.Engine SELECT TOP 5 [Products].[Name] AS [Products_Name], sum([BillItems].[Quantity]) AS sales 
FROM [Products] JOIN [BillItems] ON [BillItems].[ProductID] = [Products].[ProductID] JOIN [Bills] ON [Bills].[BillID] = [BillItems].[BillID] 
WHERE [Bills].[Status] = ? GROUP BY [Products].[Name] ORDER BY sum([BillItems].[Quantity]) DESC
INFO:sqlalchemy.engine.Engine:SELECT TOP 5 [Products].[Name] AS [Products_Name], sum([BillItems].[Quantity]) AS sales 
FROM [Products] JOIN [BillItems] ON [BillItems].[ProductID] = [Products].[ProductID] JOIN [Bills] ON [Bills].[BillID] = [BillItems].[BillID] 
WHERE [Bills].[Status] = ? GROUP BY [Products].[Name] ORDER BY sum([BillItems].[Quantity]) DESC
2025-06-25 14:03:29,051 INFO sqlalchemy.engine.Engine [cached since 243.4s ago] ('已结账',)
INFO:sqlalchemy.engine.Engine:[cached since 243.4s ago] ('已结账',)
INFO:     127.0.0.1:61921 - "GET /dashboard/top-products?limit=5 HTTP/1.1" 200 OK
2025-06-25 14:03:29,059 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:     127.0.0.1:61921 - "GET /health HTTP/1.1" 200 OK
2025-06-25 14:03:29,965 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 14:03:29,965 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products]) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products]) AS anon_1
2025-06-25 14:03:29,965 INFO sqlalchemy.engine.Engine [cached since 244.4s ago] ()
INFO:sqlalchemy.engine.Engine:[cached since 244.4s ago] ()
2025-06-25 14:03:29,965 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills]) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills]) AS anon_1
2025-06-25 14:03:29,965 INFO sqlalchemy.engine.Engine [cached since 244.4s ago] ()
INFO:sqlalchemy.engine.Engine:[cached since 244.4s ago] ()
2025-06-25 14:03:29,965 INFO sqlalchemy.engine.Engine SELECT sum([Products].[Stock]) AS sum_1 
FROM [Products]
INFO:sqlalchemy.engine.Engine:SELECT sum([Products].[Stock]) AS sum_1 
FROM [Products]
2025-06-25 14:03:29,965 INFO sqlalchemy.engine.Engine [cached since 244.4s ago] ()
INFO:sqlalchemy.engine.Engine:[cached since 244.4s ago] ()
2025-06-25 14:03:29,965 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products] 
WHERE [Products].[Stock] < ?) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products] 
WHERE [Products].[Stock] < ?) AS anon_1
2025-06-25 14:03:29,965 INFO sqlalchemy.engine.Engine [cached since 244.4s ago] (10,)
INFO:sqlalchemy.engine.Engine:[cached since 244.4s ago] (10,)
INFO:     127.0.0.1:61921 - "GET /stats HTTP/1.1" 200 OK
2025-06-25 14:03:29,965 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
2025-06-25 14:03:29,983 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 14:03:29,983 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
2025-06-25 14:03:29,983 INFO sqlalchemy.engine.Engine [cached since 244.4s ago] (datetime.datetime(2025, 6, 25, 0, 0), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 244.4s ago] (datetime.datetime(2025, 6, 25, 0, 0), '已结账')
2025-06-25 14:03:29,985 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
2025-06-25 14:03:29,985 INFO sqlalchemy.engine.Engine [cached since 244.4s ago] (datetime.datetime(2025, 6, 23, 0, 0), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 244.4s ago] (datetime.datetime(2025, 6, 23, 0, 0), '已结账')
2025-06-25 14:03:29,986 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ?
2025-06-25 14:03:29,986 INFO sqlalchemy.engine.Engine [cached since 244.4s ago] (datetime.datetime(2025, 6, 16, 0, 0), datetime.datetime(2025, 6, 22, 23, 59, 59), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 244.4s ago] (datetime.datetime(2025, 6, 16, 0, 0), datetime.datetime(2025, 6, 22, 23, 59, 59), '已结账')
2025-06-25 14:03:29,986 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
2025-06-25 14:03:29,989 INFO sqlalchemy.engine.Engine [cached since 244.4s ago] (datetime.datetime(2025, 6, 1, 0, 0), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 244.4s ago] (datetime.datetime(2025, 6, 1, 0, 0), '已结账')
INFO:     127.0.0.1:61921 - "GET /dashboard/sales HTTP/1.1" 200 OK
2025-06-25 14:03:29,989 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
2025-06-25 14:03:29,997 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 14:03:29,997 INFO sqlalchemy.engine.Engine SELECT TOP 5 [Products].[Name] AS [Products_Name], sum([BillItems].[Quantity]) AS sales 
FROM [Products] JOIN [BillItems] ON [BillItems].[ProductID] = [Products].[ProductID] JOIN [Bills] ON [Bills].[BillID] = [BillItems].[BillID] 
WHERE [Bills].[Status] = ? GROUP BY [Products].[Name] ORDER BY sum([BillItems].[Quantity]) DESC
INFO:sqlalchemy.engine.Engine:SELECT TOP 5 [Products].[Name] AS [Products_Name], sum([BillItems].[Quantity]) AS sales 
FROM [Products] JOIN [BillItems] ON [BillItems].[ProductID] = [Products].[ProductID] JOIN [Bills] ON [Bills].[BillID] = [BillItems].[BillID] 
WHERE [Bills].[Status] = ? GROUP BY [Products].[Name] ORDER BY sum([BillItems].[Quantity]) DESC
2025-06-25 14:03:29,997 INFO sqlalchemy.engine.Engine [cached since 244.4s ago] ('已结账',)
INFO:sqlalchemy.engine.Engine:[cached since 244.4s ago] ('已结账',)
INFO:     127.0.0.1:61921 - "GET /dashboard/top-products?limit=5 HTTP/1.1" 200 OK
2025-06-25 14:03:30,001 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:     127.0.0.1:61922 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:61922 - "GET /health HTTP/1.1" 200 OK
2025-06-25 14:03:37,659 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 14:03:37,660 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products]) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products]) AS anon_1
2025-06-25 14:03:37,660 INFO sqlalchemy.engine.Engine [cached since 252.1s ago] ()
INFO:sqlalchemy.engine.Engine:[cached since 252.1s ago] ()
2025-06-25 14:03:37,660 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills]) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills]) AS anon_1
2025-06-25 14:03:37,660 INFO sqlalchemy.engine.Engine [cached since 252.1s ago] ()
INFO:sqlalchemy.engine.Engine:[cached since 252.1s ago] ()
2025-06-25 14:03:37,664 INFO sqlalchemy.engine.Engine SELECT sum([Products].[Stock]) AS sum_1 
FROM [Products]
INFO:sqlalchemy.engine.Engine:SELECT sum([Products].[Stock]) AS sum_1 
FROM [Products]
2025-06-25 14:03:37,664 INFO sqlalchemy.engine.Engine [cached since 252.1s ago] ()
INFO:sqlalchemy.engine.Engine:[cached since 252.1s ago] ()
2025-06-25 14:03:37,665 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products] 
WHERE [Products].[Stock] < ?) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products] 
WHERE [Products].[Stock] < ?) AS anon_1
2025-06-25 14:03:37,665 INFO sqlalchemy.engine.Engine [cached since 252.1s ago] (10,)
INFO:sqlalchemy.engine.Engine:[cached since 252.1s ago] (10,)
INFO:     127.0.0.1:61922 - "GET /stats HTTP/1.1" 200 OK
2025-06-25 14:03:37,668 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
2025-06-25 14:03:37,668 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 14:03:37,672 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products]) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products]) AS anon_1
2025-06-25 14:03:37,672 INFO sqlalchemy.engine.Engine [cached since 252.1s ago] ()
INFO:sqlalchemy.engine.Engine:[cached since 252.1s ago] ()
2025-06-25 14:03:37,672 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills]) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills]) AS anon_1
2025-06-25 14:03:37,672 INFO sqlalchemy.engine.Engine [cached since 252.1s ago] ()
INFO:sqlalchemy.engine.Engine:[cached since 252.1s ago] ()
2025-06-25 14:03:37,672 INFO sqlalchemy.engine.Engine SELECT sum([Products].[Stock]) AS sum_1 
FROM [Products]
INFO:sqlalchemy.engine.Engine:SELECT sum([Products].[Stock]) AS sum_1 
FROM [Products]
2025-06-25 14:03:37,672 INFO sqlalchemy.engine.Engine [cached since 252.1s ago] ()
INFO:sqlalchemy.engine.Engine:[cached since 252.1s ago] ()
2025-06-25 14:03:37,676 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products] 
WHERE [Products].[Stock] < ?) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products] 
WHERE [Products].[Stock] < ?) AS anon_1
2025-06-25 14:03:37,676 INFO sqlalchemy.engine.Engine [cached since 252.1s ago] (10,)
INFO:sqlalchemy.engine.Engine:[cached since 252.1s ago] (10,)
INFO:     127.0.0.1:61922 - "GET /stats HTTP/1.1" 200 OK
2025-06-25 14:03:37,676 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
2025-06-25 14:03:37,680 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 14:03:37,680 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
2025-06-25 14:03:37,680 INFO sqlalchemy.engine.Engine [cached since 252.1s ago] (datetime.datetime(2025, 6, 25, 0, 0), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 252.1s ago] (datetime.datetime(2025, 6, 25, 0, 0), '已结账')
2025-06-25 14:03:37,684 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
2025-06-25 14:03:37,684 INFO sqlalchemy.engine.Engine [cached since 252.1s ago] (datetime.datetime(2025, 6, 23, 0, 0), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 252.1s ago] (datetime.datetime(2025, 6, 23, 0, 0), '已结账')
2025-06-25 14:03:37,685 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ?
2025-06-25 14:03:37,685 INFO sqlalchemy.engine.Engine [cached since 252.1s ago] (datetime.datetime(2025, 6, 16, 0, 0), datetime.datetime(2025, 6, 22, 23, 59, 59), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 252.1s ago] (datetime.datetime(2025, 6, 16, 0, 0), datetime.datetime(2025, 6, 22, 23, 59, 59), '已结账')
2025-06-25 14:03:37,685 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
2025-06-25 14:03:37,685 INFO sqlalchemy.engine.Engine [cached since 252.1s ago] (datetime.datetime(2025, 6, 1, 0, 0), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 252.1s ago] (datetime.datetime(2025, 6, 1, 0, 0), '已结账')
INFO:     127.0.0.1:61922 - "GET /dashboard/sales HTTP/1.1" 200 OK
2025-06-25 14:03:37,689 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
2025-06-25 14:03:37,694 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 14:03:37,694 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
2025-06-25 14:03:37,694 INFO sqlalchemy.engine.Engine [cached since 252.1s ago] (datetime.datetime(2025, 6, 25, 0, 0), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 252.1s ago] (datetime.datetime(2025, 6, 25, 0, 0), '已结账')
2025-06-25 14:03:37,697 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
2025-06-25 14:03:37,697 INFO sqlalchemy.engine.Engine [cached since 252.1s ago] (datetime.datetime(2025, 6, 23, 0, 0), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 252.1s ago] (datetime.datetime(2025, 6, 23, 0, 0), '已结账')
2025-06-25 14:03:37,697 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ?
2025-06-25 14:03:37,697 INFO sqlalchemy.engine.Engine [cached since 252.1s ago] (datetime.datetime(2025, 6, 16, 0, 0), datetime.datetime(2025, 6, 22, 23, 59, 59), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 252.1s ago] (datetime.datetime(2025, 6, 16, 0, 0), datetime.datetime(2025, 6, 22, 23, 59, 59), '已结账')
2025-06-25 14:03:37,701 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
2025-06-25 14:03:37,701 INFO sqlalchemy.engine.Engine [cached since 252.1s ago] (datetime.datetime(2025, 6, 1, 0, 0), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 252.1s ago] (datetime.datetime(2025, 6, 1, 0, 0), '已结账')
INFO:     127.0.0.1:61922 - "GET /dashboard/sales HTTP/1.1" 200 OK
2025-06-25 14:03:37,702 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
2025-06-25 14:03:37,706 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 14:03:37,706 INFO sqlalchemy.engine.Engine SELECT TOP 5 [Products].[Name] AS [Products_Name], sum([BillItems].[Quantity]) AS sales 
FROM [Products] JOIN [BillItems] ON [BillItems].[ProductID] = [Products].[ProductID] JOIN [Bills] ON [Bills].[BillID] = [BillItems].[BillID] 
WHERE [Bills].[Status] = ? GROUP BY [Products].[Name] ORDER BY sum([BillItems].[Quantity]) DESC
INFO:sqlalchemy.engine.Engine:SELECT TOP 5 [Products].[Name] AS [Products_Name], sum([BillItems].[Quantity]) AS sales 
FROM [Products] JOIN [BillItems] ON [BillItems].[ProductID] = [Products].[ProductID] JOIN [Bills] ON [Bills].[BillID] = [BillItems].[BillID] 
WHERE [Bills].[Status] = ? GROUP BY [Products].[Name] ORDER BY sum([BillItems].[Quantity]) DESC
2025-06-25 14:03:37,706 INFO sqlalchemy.engine.Engine [cached since 252.1s ago] ('已结账',)
INFO:sqlalchemy.engine.Engine:[cached since 252.1s ago] ('已结账',)
INFO:     127.0.0.1:61922 - "GET /dashboard/top-products?limit=5 HTTP/1.1" 200 OK
2025-06-25 14:03:37,709 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
2025-06-25 14:03:37,709 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 14:03:37,713 INFO sqlalchemy.engine.Engine SELECT TOP 5 [Products].[Name] AS [Products_Name], sum([BillItems].[Quantity]) AS sales 
FROM [Products] JOIN [BillItems] ON [BillItems].[ProductID] = [Products].[ProductID] JOIN [Bills] ON [Bills].[BillID] = [BillItems].[BillID] 
WHERE [Bills].[Status] = ? GROUP BY [Products].[Name] ORDER BY sum([BillItems].[Quantity]) DESC
INFO:sqlalchemy.engine.Engine:SELECT TOP 5 [Products].[Name] AS [Products_Name], sum([BillItems].[Quantity]) AS sales 
FROM [Products] JOIN [BillItems] ON [BillItems].[ProductID] = [Products].[ProductID] JOIN [Bills] ON [Bills].[BillID] = [BillItems].[BillID] 
WHERE [Bills].[Status] = ? GROUP BY [Products].[Name] ORDER BY sum([BillItems].[Quantity]) DESC
2025-06-25 14:03:37,714 INFO sqlalchemy.engine.Engine [cached since 252.1s ago] ('已结账',)
INFO:sqlalchemy.engine.Engine:[cached since 252.1s ago] ('已结账',)
INFO:     127.0.0.1:61922 - "GET /dashboard/top-products?limit=5 HTTP/1.1" 200 OK
2025-06-25 14:03:37,714 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:     127.0.0.1:61922 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:61934 - "GET /health HTTP/1.1" 200 OK
2025-06-25 14:03:38,922 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 14:03:38,922 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products]) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products]) AS anon_1
2025-06-25 14:03:38,922 INFO sqlalchemy.engine.Engine [cached since 253.3s ago] ()
INFO:sqlalchemy.engine.Engine:[cached since 253.3s ago] ()
2025-06-25 14:03:38,927 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills]) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills]) AS anon_1
2025-06-25 14:03:38,927 INFO sqlalchemy.engine.Engine [cached since 253.3s ago] ()
INFO:sqlalchemy.engine.Engine:[cached since 253.3s ago] ()
2025-06-25 14:03:38,927 INFO sqlalchemy.engine.Engine SELECT sum([Products].[Stock]) AS sum_1 
FROM [Products]
INFO:sqlalchemy.engine.Engine:SELECT sum([Products].[Stock]) AS sum_1 
FROM [Products]
2025-06-25 14:03:38,927 INFO sqlalchemy.engine.Engine [cached since 253.3s ago] ()
INFO:sqlalchemy.engine.Engine:[cached since 253.3s ago] ()
2025-06-25 14:03:38,930 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products] 
WHERE [Products].[Stock] < ?) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products] 
WHERE [Products].[Stock] < ?) AS anon_1
2025-06-25 14:03:38,930 INFO sqlalchemy.engine.Engine [cached since 253.3s ago] (10,)
INFO:sqlalchemy.engine.Engine:[cached since 253.3s ago] (10,)
INFO:     127.0.0.1:61934 - "GET /stats HTTP/1.1" 200 OK
2025-06-25 14:03:38,931 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
2025-06-25 14:03:38,935 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 14:03:38,935 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products]) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products]) AS anon_1
2025-06-25 14:03:38,935 INFO sqlalchemy.engine.Engine [cached since 253.4s ago] ()
INFO:sqlalchemy.engine.Engine:[cached since 253.4s ago] ()
2025-06-25 14:03:38,935 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills]) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills]) AS anon_1
2025-06-25 14:03:38,939 INFO sqlalchemy.engine.Engine [cached since 253.4s ago] ()
INFO:sqlalchemy.engine.Engine:[cached since 253.4s ago] ()
2025-06-25 14:03:38,939 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 14:03:38,939 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
2025-06-25 14:03:38,939 INFO sqlalchemy.engine.Engine SELECT sum([Products].[Stock]) AS sum_1 
FROM [Products]
INFO:sqlalchemy.engine.Engine:SELECT sum([Products].[Stock]) AS sum_1 
FROM [Products]
2025-06-25 14:03:38,939 INFO sqlalchemy.engine.Engine [cached since 253.3s ago] (datetime.datetime(2025, 6, 25, 0, 0), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 253.3s ago] (datetime.datetime(2025, 6, 25, 0, 0), '已结账')
2025-06-25 14:03:38,942 INFO sqlalchemy.engine.Engine [cached since 253.4s ago] ()
INFO:sqlalchemy.engine.Engine:[cached since 253.4s ago] ()
2025-06-25 14:03:38,943 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
2025-06-25 14:03:38,943 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products] 
WHERE [Products].[Stock] < ?) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products] 
WHERE [Products].[Stock] < ?) AS anon_1
2025-06-25 14:03:38,943 INFO sqlalchemy.engine.Engine [cached since 253.3s ago] (datetime.datetime(2025, 6, 23, 0, 0), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 253.3s ago] (datetime.datetime(2025, 6, 23, 0, 0), '已结账')
2025-06-25 14:03:38,943 INFO sqlalchemy.engine.Engine [cached since 253.4s ago] (10,)
INFO:sqlalchemy.engine.Engine:[cached since 253.4s ago] (10,)
2025-06-25 14:03:38,947 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ?
INFO:     127.0.0.1:61922 - "GET /stats HTTP/1.1" 200 OK
2025-06-25 14:03:38,948 INFO sqlalchemy.engine.Engine [cached since 253.3s ago] (datetime.datetime(2025, 6, 16, 0, 0), datetime.datetime(2025, 6, 22, 23, 59, 59), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 253.3s ago] (datetime.datetime(2025, 6, 16, 0, 0), datetime.datetime(2025, 6, 22, 23, 59, 59), '已结账')
2025-06-25 14:03:38,948 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
2025-06-25 14:03:38,951 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
2025-06-25 14:03:38,952 INFO sqlalchemy.engine.Engine [cached since 253.3s ago] (datetime.datetime(2025, 6, 1, 0, 0), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 253.3s ago] (datetime.datetime(2025, 6, 1, 0, 0), '已结账')
INFO:     127.0.0.1:61934 - "GET /dashboard/sales HTTP/1.1" 200 OK
2025-06-25 14:03:38,952 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
2025-06-25 14:03:38,955 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 14:03:38,955 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
2025-06-25 14:03:38,955 INFO sqlalchemy.engine.Engine [cached since 253.3s ago] (datetime.datetime(2025, 6, 25, 0, 0), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 253.3s ago] (datetime.datetime(2025, 6, 25, 0, 0), '已结账')
2025-06-25 14:03:38,960 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 14:03:38,960 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
2025-06-25 14:03:38,960 INFO sqlalchemy.engine.Engine SELECT TOP 5 [Products].[Name] AS [Products_Name], sum([BillItems].[Quantity]) AS sales 
FROM [Products] JOIN [BillItems] ON [BillItems].[ProductID] = [Products].[ProductID] JOIN [Bills] ON [Bills].[BillID] = [BillItems].[BillID] 
WHERE [Bills].[Status] = ? GROUP BY [Products].[Name] ORDER BY sum([BillItems].[Quantity]) DESC
INFO:sqlalchemy.engine.Engine:SELECT TOP 5 [Products].[Name] AS [Products_Name], sum([BillItems].[Quantity]) AS sales 
FROM [Products] JOIN [BillItems] ON [BillItems].[ProductID] = [Products].[ProductID] JOIN [Bills] ON [Bills].[BillID] = [BillItems].[BillID] 
WHERE [Bills].[Status] = ? GROUP BY [Products].[Name] ORDER BY sum([BillItems].[Quantity]) DESC
2025-06-25 14:03:38,960 INFO sqlalchemy.engine.Engine [cached since 253.4s ago] (datetime.datetime(2025, 6, 23, 0, 0), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 253.4s ago] (datetime.datetime(2025, 6, 23, 0, 0), '已结账')
2025-06-25 14:03:38,960 INFO sqlalchemy.engine.Engine [cached since 253.3s ago] ('已结账',)
INFO:sqlalchemy.engine.Engine:[cached since 253.3s ago] ('已结账',)
2025-06-25 14:03:38,964 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ?
2025-06-25 14:03:38,964 INFO sqlalchemy.engine.Engine [cached since 253.3s ago] (datetime.datetime(2025, 6, 16, 0, 0), datetime.datetime(2025, 6, 22, 23, 59, 59), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 253.3s ago] (datetime.datetime(2025, 6, 16, 0, 0), datetime.datetime(2025, 6, 22, 23, 59, 59), '已结账')
INFO:     127.0.0.1:61934 - "GET /dashboard/top-products?limit=5 HTTP/1.1" 200 OK
2025-06-25 14:03:38,964 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
2025-06-25 14:03:38,964 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
2025-06-25 14:03:38,967 INFO sqlalchemy.engine.Engine [cached since 253.4s ago] (datetime.datetime(2025, 6, 1, 0, 0), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 253.4s ago] (datetime.datetime(2025, 6, 1, 0, 0), '已结账')
INFO:     127.0.0.1:61922 - "GET /dashboard/sales HTTP/1.1" 200 OK
2025-06-25 14:03:38,968 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
2025-06-25 14:03:38,991 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 14:03:38,991 INFO sqlalchemy.engine.Engine SELECT TOP 5 [Products].[Name] AS [Products_Name], sum([BillItems].[Quantity]) AS sales 
FROM [Products] JOIN [BillItems] ON [BillItems].[ProductID] = [Products].[ProductID] JOIN [Bills] ON [Bills].[BillID] = [BillItems].[BillID] 
WHERE [Bills].[Status] = ? GROUP BY [Products].[Name] ORDER BY sum([BillItems].[Quantity]) DESC
INFO:sqlalchemy.engine.Engine:SELECT TOP 5 [Products].[Name] AS [Products_Name], sum([BillItems].[Quantity]) AS sales 
FROM [Products] JOIN [BillItems] ON [BillItems].[ProductID] = [Products].[ProductID] JOIN [Bills] ON [Bills].[BillID] = [BillItems].[BillID] 
WHERE [Bills].[Status] = ? GROUP BY [Products].[Name] ORDER BY sum([BillItems].[Quantity]) DESC
2025-06-25 14:03:38,991 INFO sqlalchemy.engine.Engine [cached since 253.4s ago] ('已结账',)
INFO:sqlalchemy.engine.Engine:[cached since 253.4s ago] ('已结账',)
INFO:     127.0.0.1:61922 - "GET /dashboard/top-products?limit=5 HTTP/1.1" 200 OK
2025-06-25 14:03:38,991 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:     127.0.0.1:61935 - "OPTIONS /bills HTTP/1.1" 200 OK
INFO:__main__:正在获取订单列表...
2025-06-25 14:04:01,536 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 14:04:01,538 INFO sqlalchemy.engine.Engine SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] ORDER BY [Bills].[BillDate] DESC
INFO:sqlalchemy.engine.Engine:SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills] ORDER BY [Bills].[BillDate] DESC
2025-06-25 14:04:01,538 INFO sqlalchemy.engine.Engine [generated in 0.00040s] ()
INFO:sqlalchemy.engine.Engine:[generated in 0.00040s] ()
INFO:__main__:成功获取到 6 个订单
2025-06-25 14:04:01,546 INFO sqlalchemy.engine.Engine SELECT [BillItems].[BillItemID] AS [BillItems_BillItemID], [BillItems].[BillID] AS [BillItems_BillID], [BillItems].[ProductID] AS [BillItems_ProductID], [BillItems].[Quantity] AS [BillItems_Quantity], [BillItems].[Price] AS [BillItems_Price] 
FROM [BillItems] 
WHERE [BillItems].[BillID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [BillItems].[BillItemID] AS [BillItems_BillItemID], [BillItems].[BillID] AS [BillItems_BillID], [BillItems].[ProductID] AS [BillItems_ProductID], [BillItems].[Quantity] AS [BillItems_Quantity], [BillItems].[Price] AS [BillItems_Price] 
FROM [BillItems] 
WHERE [BillItems].[BillID] = ?
2025-06-25 14:04:01,546 INFO sqlalchemy.engine.Engine [generated in 0.00049s] (6,)
INFO:sqlalchemy.engine.Engine:[generated in 0.00049s] (6,)
2025-06-25 14:04:01,547 INFO sqlalchemy.engine.Engine SELECT TOP 1 [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products] 
WHERE [Products].[ProductID] = ?
INFO:sqlalchemy.engine.Engine:SELECT TOP 1 [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products] 
WHERE [Products].[ProductID] = ?
2025-06-25 14:04:01,547 INFO sqlalchemy.engine.Engine [generated in 0.00054s] (17,)
INFO:sqlalchemy.engine.Engine:[generated in 0.00054s] (17,)
2025-06-25 14:04:01,552 INFO sqlalchemy.engine.Engine SELECT [Guests].[GuestID] AS [Guests_GuestID], [Guests].[Name] AS [Guests_Name], [Guests].[Level] AS [Guests_Level], [Guests].[Points] AS [Guests_Points], [Guests].[Phone] AS [Guests_Phone] 
FROM [Guests] 
WHERE [Guests].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Guests].[GuestID] AS [Guests_GuestID], [Guests].[Name] AS [Guests_Name], [Guests].[Level] AS [Guests_Level], [Guests].[Points] AS [Guests_Points], [Guests].[Phone] AS [Guests_Phone] 
FROM [Guests] 
WHERE [Guests].[GuestID] = ?
2025-06-25 14:04:01,552 INFO sqlalchemy.engine.Engine [generated in 0.00049s] (13,)
INFO:sqlalchemy.engine.Engine:[generated in 0.00049s] (13,)
2025-06-25 14:04:01,556 INFO sqlalchemy.engine.Engine SELECT [Employees].[EmployeeID] AS [Employees_EmployeeID], [Employees].[Name] AS [Employees_Name], [Employees].[Gender] AS [Employees_Gender], [Employees].[BirthDate] AS [Employees_BirthDate], [Employees].[Position] AS [Employees_Position], [Employees].[Phone] AS [Employees_Phone], [Employees].username AS [Employees_username], [Employees].password AS [Employees_password], [Employees].role AS [Employees_role] 
FROM [Employees] 
WHERE [Employees].[EmployeeID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Employees].[EmployeeID] AS [Employees_EmployeeID], [Employees].[Name] AS [Employees_Name], [Employees].[Gender] AS [Employees_Gender], [Employees].[BirthDate] AS [Employees_BirthDate], [Employees].[Position] AS [Employees_Position], [Employees].[Phone] AS [Employees_Phone], [Employees].username AS [Employees_username], [Employees].password AS [Employees_password], [Employees].role AS [Employees_role] 
FROM [Employees] 
WHERE [Employees].[EmployeeID] = ?
2025-06-25 14:04:01,556 INFO sqlalchemy.engine.Engine [generated in 0.00041s] (1,)
INFO:sqlalchemy.engine.Engine:[generated in 0.00041s] (1,)
2025-06-25 14:04:01,560 INFO sqlalchemy.engine.Engine SELECT [BillItems].[BillItemID] AS [BillItems_BillItemID], [BillItems].[BillID] AS [BillItems_BillID], [BillItems].[ProductID] AS [BillItems_ProductID], [BillItems].[Quantity] AS [BillItems_Quantity], [BillItems].[Price] AS [BillItems_Price] 
FROM [BillItems] 
WHERE [BillItems].[BillID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [BillItems].[BillItemID] AS [BillItems_BillItemID], [BillItems].[BillID] AS [BillItems_BillID], [BillItems].[ProductID] AS [BillItems_ProductID], [BillItems].[Quantity] AS [BillItems_Quantity], [BillItems].[Price] AS [BillItems_Price] 
FROM [BillItems] 
WHERE [BillItems].[BillID] = ?
2025-06-25 14:04:01,560 INFO sqlalchemy.engine.Engine [cached since 0.01735s ago] (5,)
INFO:sqlalchemy.engine.Engine:[cached since 0.01735s ago] (5,)
2025-06-25 14:04:01,564 INFO sqlalchemy.engine.Engine SELECT TOP 1 [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products] 
WHERE [Products].[ProductID] = ?
INFO:sqlalchemy.engine.Engine:SELECT TOP 1 [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products] 
WHERE [Products].[ProductID] = ?
2025-06-25 14:04:01,564 INFO sqlalchemy.engine.Engine [cached since 0.01515s ago] (17,)
INFO:sqlalchemy.engine.Engine:[cached since 0.01515s ago] (17,)
2025-06-25 14:04:01,564 INFO sqlalchemy.engine.Engine SELECT [BillItems].[BillItemID] AS [BillItems_BillItemID], [BillItems].[BillID] AS [BillItems_BillID], [BillItems].[ProductID] AS [BillItems_ProductID], [BillItems].[Quantity] AS [BillItems_Quantity], [BillItems].[Price] AS [BillItems_Price] 
FROM [BillItems] 
WHERE [BillItems].[BillID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [BillItems].[BillItemID] AS [BillItems_BillItemID], [BillItems].[BillID] AS [BillItems_BillID], [BillItems].[ProductID] AS [BillItems_ProductID], [BillItems].[Quantity] AS [BillItems_Quantity], [BillItems].[Price] AS [BillItems_Price] 
FROM [BillItems] 
WHERE [BillItems].[BillID] = ?
2025-06-25 14:04:01,564 INFO sqlalchemy.engine.Engine [cached since 0.02126s ago] (4,)
INFO:sqlalchemy.engine.Engine:[cached since 0.02126s ago] (4,)
2025-06-25 14:04:01,568 INFO sqlalchemy.engine.Engine SELECT TOP 1 [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products] 
WHERE [Products].[ProductID] = ?
INFO:sqlalchemy.engine.Engine:SELECT TOP 1 [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products] 
WHERE [Products].[ProductID] = ?
2025-06-25 14:04:01,568 INFO sqlalchemy.engine.Engine [cached since 0.01875s ago] (1,)
INFO:sqlalchemy.engine.Engine:[cached since 0.01875s ago] (1,)
2025-06-25 14:04:01,568 INFO sqlalchemy.engine.Engine SELECT [BillItems].[BillItemID] AS [BillItems_BillItemID], [BillItems].[BillID] AS [BillItems_BillID], [BillItems].[ProductID] AS [BillItems_ProductID], [BillItems].[Quantity] AS [BillItems_Quantity], [BillItems].[Price] AS [BillItems_Price] 
FROM [BillItems] 
WHERE [BillItems].[BillID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [BillItems].[BillItemID] AS [BillItems_BillItemID], [BillItems].[BillID] AS [BillItems_BillID], [BillItems].[ProductID] AS [BillItems_ProductID], [BillItems].[Quantity] AS [BillItems_Quantity], [BillItems].[Price] AS [BillItems_Price] 
FROM [BillItems] 
WHERE [BillItems].[BillID] = ?
2025-06-25 14:04:01,568 INFO sqlalchemy.engine.Engine [cached since 0.02453s ago] (3,)
INFO:sqlalchemy.engine.Engine:[cached since 0.02453s ago] (3,)
2025-06-25 14:04:01,568 INFO sqlalchemy.engine.Engine SELECT TOP 1 [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products] 
WHERE [Products].[ProductID] = ?
INFO:sqlalchemy.engine.Engine:SELECT TOP 1 [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products] 
WHERE [Products].[ProductID] = ?
2025-06-25 14:04:01,568 INFO sqlalchemy.engine.Engine [cached since 0.0222s ago] (4,)
INFO:sqlalchemy.engine.Engine:[cached since 0.0222s ago] (4,)
2025-06-25 14:04:01,573 INFO sqlalchemy.engine.Engine SELECT TOP 1 [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products] 
WHERE [Products].[ProductID] = ?
INFO:sqlalchemy.engine.Engine:SELECT TOP 1 [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products] 
WHERE [Products].[ProductID] = ?
2025-06-25 14:04:01,573 INFO sqlalchemy.engine.Engine [cached since 0.02394s ago] (6,)
INFO:sqlalchemy.engine.Engine:[cached since 0.02394s ago] (6,)
2025-06-25 14:04:01,573 INFO sqlalchemy.engine.Engine SELECT [Guests].[GuestID] AS [Guests_GuestID], [Guests].[Name] AS [Guests_Name], [Guests].[Level] AS [Guests_Level], [Guests].[Points] AS [Guests_Points], [Guests].[Phone] AS [Guests_Phone] 
FROM [Guests] 
WHERE [Guests].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Guests].[GuestID] AS [Guests_GuestID], [Guests].[Name] AS [Guests_Name], [Guests].[Level] AS [Guests_Level], [Guests].[Points] AS [Guests_Points], [Guests].[Phone] AS [Guests_Phone] 
FROM [Guests] 
WHERE [Guests].[GuestID] = ?
2025-06-25 14:04:01,573 INFO sqlalchemy.engine.Engine [cached since 0.02079s ago] (6,)
INFO:sqlalchemy.engine.Engine:[cached since 0.02079s ago] (6,)
2025-06-25 14:04:01,576 INFO sqlalchemy.engine.Engine SELECT [BillItems].[BillItemID] AS [BillItems_BillItemID], [BillItems].[BillID] AS [BillItems_BillID], [BillItems].[ProductID] AS [BillItems_ProductID], [BillItems].[Quantity] AS [BillItems_Quantity], [BillItems].[Price] AS [BillItems_Price] 
FROM [BillItems] 
WHERE [BillItems].[BillID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [BillItems].[BillItemID] AS [BillItems_BillItemID], [BillItems].[BillID] AS [BillItems_BillID], [BillItems].[ProductID] AS [BillItems_ProductID], [BillItems].[Quantity] AS [BillItems_Quantity], [BillItems].[Price] AS [BillItems_Price] 
FROM [BillItems] 
WHERE [BillItems].[BillID] = ?
2025-06-25 14:04:01,576 INFO sqlalchemy.engine.Engine [cached since 0.03167s ago] (2,)
INFO:sqlalchemy.engine.Engine:[cached since 0.03167s ago] (2,)
2025-06-25 14:04:01,576 INFO sqlalchemy.engine.Engine SELECT TOP 1 [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products] 
WHERE [Products].[ProductID] = ?
INFO:sqlalchemy.engine.Engine:SELECT TOP 1 [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products] 
WHERE [Products].[ProductID] = ?
2025-06-25 14:04:01,576 INFO sqlalchemy.engine.Engine [cached since 0.02932s ago] (12,)
INFO:sqlalchemy.engine.Engine:[cached since 0.02932s ago] (12,)
2025-06-25 14:04:01,580 INFO sqlalchemy.engine.Engine SELECT TOP 1 [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products] 
WHERE [Products].[ProductID] = ?
INFO:sqlalchemy.engine.Engine:SELECT TOP 1 [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products] 
WHERE [Products].[ProductID] = ?
2025-06-25 14:04:01,581 INFO sqlalchemy.engine.Engine [cached since 0.03097s ago] (8,)
INFO:sqlalchemy.engine.Engine:[cached since 0.03097s ago] (8,)
2025-06-25 14:04:01,582 INFO sqlalchemy.engine.Engine SELECT [Guests].[GuestID] AS [Guests_GuestID], [Guests].[Name] AS [Guests_Name], [Guests].[Level] AS [Guests_Level], [Guests].[Points] AS [Guests_Points], [Guests].[Phone] AS [Guests_Phone] 
FROM [Guests] 
WHERE [Guests].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Guests].[GuestID] AS [Guests_GuestID], [Guests].[Name] AS [Guests_Name], [Guests].[Level] AS [Guests_Level], [Guests].[Points] AS [Guests_Points], [Guests].[Phone] AS [Guests_Phone] 
FROM [Guests] 
WHERE [Guests].[GuestID] = ?
2025-06-25 14:04:01,582 INFO sqlalchemy.engine.Engine [cached since 0.02781s ago] (4,)
INFO:sqlalchemy.engine.Engine:[cached since 0.02781s ago] (4,)
2025-06-25 14:04:01,582 INFO sqlalchemy.engine.Engine SELECT [Employees].[EmployeeID] AS [Employees_EmployeeID], [Employees].[Name] AS [Employees_Name], [Employees].[Gender] AS [Employees_Gender], [Employees].[BirthDate] AS [Employees_BirthDate], [Employees].[Position] AS [Employees_Position], [Employees].[Phone] AS [Employees_Phone], [Employees].username AS [Employees_username], [Employees].password AS [Employees_password], [Employees].role AS [Employees_role] 
FROM [Employees] 
WHERE [Employees].[EmployeeID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Employees].[EmployeeID] AS [Employees_EmployeeID], [Employees].[Name] AS [Employees_Name], [Employees].[Gender] AS [Employees_Gender], [Employees].[BirthDate] AS [Employees_BirthDate], [Employees].[Position] AS [Employees_Position], [Employees].[Phone] AS [Employees_Phone], [Employees].username AS [Employees_username], [Employees].password AS [Employees_password], [Employees].role AS [Employees_role] 
FROM [Employees] 
WHERE [Employees].[EmployeeID] = ?
2025-06-25 14:04:01,582 INFO sqlalchemy.engine.Engine [cached since 0.02478s ago] (3,)
INFO:sqlalchemy.engine.Engine:[cached since 0.02478s ago] (3,)
2025-06-25 14:04:01,585 INFO sqlalchemy.engine.Engine SELECT [BillItems].[BillItemID] AS [BillItems_BillItemID], [BillItems].[BillID] AS [BillItems_BillID], [BillItems].[ProductID] AS [BillItems_ProductID], [BillItems].[Quantity] AS [BillItems_Quantity], [BillItems].[Price] AS [BillItems_Price] 
FROM [BillItems] 
WHERE [BillItems].[BillID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [BillItems].[BillItemID] AS [BillItems_BillItemID], [BillItems].[BillID] AS [BillItems_BillID], [BillItems].[ProductID] AS [BillItems_ProductID], [BillItems].[Quantity] AS [BillItems_Quantity], [BillItems].[Price] AS [BillItems_Price] 
FROM [BillItems] 
WHERE [BillItems].[BillID] = ?
2025-06-25 14:04:01,585 INFO sqlalchemy.engine.Engine [cached since 0.03994s ago] (1,)
INFO:sqlalchemy.engine.Engine:[cached since 0.03994s ago] (1,)
2025-06-25 14:04:01,585 INFO sqlalchemy.engine.Engine SELECT TOP 1 [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products] 
WHERE [Products].[ProductID] = ?
INFO:sqlalchemy.engine.Engine:SELECT TOP 1 [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products] 
WHERE [Products].[ProductID] = ?
2025-06-25 14:04:01,585 INFO sqlalchemy.engine.Engine [cached since 0.03743s ago] (1,)
INFO:sqlalchemy.engine.Engine:[cached since 0.03743s ago] (1,)
2025-06-25 14:04:01,585 INFO sqlalchemy.engine.Engine SELECT TOP 1 [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products] 
WHERE [Products].[ProductID] = ?
INFO:sqlalchemy.engine.Engine:SELECT TOP 1 [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products] 
WHERE [Products].[ProductID] = ?
2025-06-25 14:04:01,589 INFO sqlalchemy.engine.Engine [cached since 0.03908s ago] (3,)
INFO:sqlalchemy.engine.Engine:[cached since 0.03908s ago] (3,)
2025-06-25 14:04:01,589 INFO sqlalchemy.engine.Engine SELECT [Guests].[GuestID] AS [Guests_GuestID], [Guests].[Name] AS [Guests_Name], [Guests].[Level] AS [Guests_Level], [Guests].[Points] AS [Guests_Points], [Guests].[Phone] AS [Guests_Phone] 
FROM [Guests] 
WHERE [Guests].[GuestID] = ?
INFO:sqlalchemy.engine.Engine:SELECT [Guests].[GuestID] AS [Guests_GuestID], [Guests].[Name] AS [Guests_Name], [Guests].[Level] AS [Guests_Level], [Guests].[Points] AS [Guests_Points], [Guests].[Phone] AS [Guests_Phone] 
FROM [Guests] 
WHERE [Guests].[GuestID] = ?
2025-06-25 14:04:01,589 INFO sqlalchemy.engine.Engine [cached since 0.03629s ago] (1,)
INFO:sqlalchemy.engine.Engine:[cached since 0.03629s ago] (1,)
INFO:     127.0.0.1:61935 - "GET /bills HTTP/1.1" 200 OK
2025-06-25 14:04:01,594 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:     127.0.0.1:61935 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:61936 - "GET /health HTTP/1.1" 200 OK
2025-06-25 14:04:02,376 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 14:04:02,381 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products]) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products]) AS anon_1
2025-06-25 14:04:02,381 INFO sqlalchemy.engine.Engine [cached since 276.8s ago] ()
INFO:sqlalchemy.engine.Engine:[cached since 276.8s ago] ()
2025-06-25 14:04:02,385 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills]) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills]) AS anon_1
2025-06-25 14:04:02,385 INFO sqlalchemy.engine.Engine [cached since 276.8s ago] ()
INFO:sqlalchemy.engine.Engine:[cached since 276.8s ago] ()
2025-06-25 14:04:02,389 INFO sqlalchemy.engine.Engine SELECT sum([Products].[Stock]) AS sum_1 
FROM [Products]
INFO:sqlalchemy.engine.Engine:SELECT sum([Products].[Stock]) AS sum_1 
FROM [Products]
2025-06-25 14:04:02,389 INFO sqlalchemy.engine.Engine [cached since 276.8s ago] ()
INFO:sqlalchemy.engine.Engine:[cached since 276.8s ago] ()
2025-06-25 14:04:02,389 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products] 
WHERE [Products].[Stock] < ?) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products] 
WHERE [Products].[Stock] < ?) AS anon_1
2025-06-25 14:04:02,389 INFO sqlalchemy.engine.Engine [cached since 276.8s ago] (10,)
INFO:sqlalchemy.engine.Engine:[cached since 276.8s ago] (10,)
INFO:     127.0.0.1:61936 - "GET /stats HTTP/1.1" 200 OK
2025-06-25 14:04:02,393 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
2025-06-25 14:04:02,397 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 14:04:02,398 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products]) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products]) AS anon_1
2025-06-25 14:04:02,398 INFO sqlalchemy.engine.Engine [cached since 276.8s ago] ()
INFO:sqlalchemy.engine.Engine:[cached since 276.8s ago] ()
2025-06-25 14:04:02,398 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills]) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Bills].[BillID] AS [Bills_BillID], [Bills].[TotalAmount] AS [Bills_TotalAmount], [Bills].[Status] AS [Bills_Status], [Bills].[PaymentMethod] AS [Bills_PaymentMethod], [Bills].[BillDate] AS [Bills_BillDate], [Bills].[EmployeeID] AS [Bills_EmployeeID], [Bills].[GuestID] AS [Bills_GuestID] 
FROM [Bills]) AS anon_1
2025-06-25 14:04:02,398 INFO sqlalchemy.engine.Engine [cached since 276.8s ago] ()
INFO:sqlalchemy.engine.Engine:[cached since 276.8s ago] ()
2025-06-25 14:04:02,402 INFO sqlalchemy.engine.Engine SELECT sum([Products].[Stock]) AS sum_1 
FROM [Products]
INFO:sqlalchemy.engine.Engine:SELECT sum([Products].[Stock]) AS sum_1 
FROM [Products]
2025-06-25 14:04:02,402 INFO sqlalchemy.engine.Engine [cached since 276.8s ago] ()
INFO:sqlalchemy.engine.Engine:[cached since 276.8s ago] ()
2025-06-25 14:04:02,402 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 14:04:02,402 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
2025-06-25 14:04:02,406 INFO sqlalchemy.engine.Engine SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products] 
WHERE [Products].[Stock] < ?) AS anon_1
INFO:sqlalchemy.engine.Engine:SELECT count(*) AS count_1 
FROM (SELECT [Products].[ProductID] AS [Products_ProductID], [Products].[Name] AS [Products_Name], [Products].[Price] AS [Products_Price], [Products].[Stock] AS [Products_Stock], [Products].[Unit] AS [Products_Unit], [Products].[LastInDate] AS [Products_LastInDate], [Products].[Category] AS [Products_Category] 
FROM [Products] 
WHERE [Products].[Stock] < ?) AS anon_1
2025-06-25 14:04:02,406 INFO sqlalchemy.engine.Engine [cached since 276.8s ago] (datetime.datetime(2025, 6, 25, 0, 0), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 276.8s ago] (datetime.datetime(2025, 6, 25, 0, 0), '已结账')
2025-06-25 14:04:02,406 INFO sqlalchemy.engine.Engine [cached since 276.8s ago] (10,)
INFO:sqlalchemy.engine.Engine:[cached since 276.8s ago] (10,)
INFO:     127.0.0.1:61935 - "GET /stats HTTP/1.1" 200 OK
2025-06-25 14:04:02,406 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
2025-06-25 14:04:02,410 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
2025-06-25 14:04:02,410 INFO sqlalchemy.engine.Engine [cached since 276.8s ago] (datetime.datetime(2025, 6, 23, 0, 0), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 276.8s ago] (datetime.datetime(2025, 6, 23, 0, 0), '已结账')
2025-06-25 14:04:02,410 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ?
2025-06-25 14:04:02,410 INFO sqlalchemy.engine.Engine [cached since 276.8s ago] (datetime.datetime(2025, 6, 16, 0, 0), datetime.datetime(2025, 6, 22, 23, 59, 59), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 276.8s ago] (datetime.datetime(2025, 6, 16, 0, 0), datetime.datetime(2025, 6, 22, 23, 59, 59), '已结账')
2025-06-25 14:04:02,414 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
2025-06-25 14:04:02,414 INFO sqlalchemy.engine.Engine [cached since 276.8s ago] (datetime.datetime(2025, 6, 1, 0, 0), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 276.8s ago] (datetime.datetime(2025, 6, 1, 0, 0), '已结账')
INFO:     127.0.0.1:61936 - "GET /dashboard/sales HTTP/1.1" 200 OK
2025-06-25 14:04:02,418 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
2025-06-25 14:04:02,418 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 14:04:02,422 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
2025-06-25 14:04:02,422 INFO sqlalchemy.engine.Engine [cached since 276.8s ago] (datetime.datetime(2025, 6, 25, 0, 0), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 276.8s ago] (datetime.datetime(2025, 6, 25, 0, 0), '已结账')
2025-06-25 14:04:02,422 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
2025-06-25 14:04:02,422 INFO sqlalchemy.engine.Engine [cached since 276.8s ago] (datetime.datetime(2025, 6, 23, 0, 0), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 276.8s ago] (datetime.datetime(2025, 6, 23, 0, 0), '已结账')
2025-06-25 14:04:02,422 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 14:04:02,426 INFO sqlalchemy.engine.Engine SELECT TOP 5 [Products].[Name] AS [Products_Name], sum([BillItems].[Quantity]) AS sales 
FROM [Products] JOIN [BillItems] ON [BillItems].[ProductID] = [Products].[ProductID] JOIN [Bills] ON [Bills].[BillID] = [BillItems].[BillID] 
WHERE [Bills].[Status] = ? GROUP BY [Products].[Name] ORDER BY sum([BillItems].[Quantity]) DESC
INFO:sqlalchemy.engine.Engine:SELECT TOP 5 [Products].[Name] AS [Products_Name], sum([BillItems].[Quantity]) AS sales 
FROM [Products] JOIN [BillItems] ON [BillItems].[ProductID] = [Products].[ProductID] JOIN [Bills] ON [Bills].[BillID] = [BillItems].[BillID] 
WHERE [Bills].[Status] = ? GROUP BY [Products].[Name] ORDER BY sum([BillItems].[Quantity]) DESC
2025-06-25 14:04:02,427 INFO sqlalchemy.engine.Engine [cached since 276.8s ago] ('已结账',)
INFO:sqlalchemy.engine.Engine:[cached since 276.8s ago] ('已结账',)
2025-06-25 14:04:02,427 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[BillDate] <= ? AND [Bills].[Status] = ?
2025-06-25 14:04:02,427 INFO sqlalchemy.engine.Engine [cached since 276.8s ago] (datetime.datetime(2025, 6, 16, 0, 0), datetime.datetime(2025, 6, 22, 23, 59, 59), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 276.8s ago] (datetime.datetime(2025, 6, 16, 0, 0), datetime.datetime(2025, 6, 22, 23, 59, 59), '已结账')
2025-06-25 14:04:02,427 INFO sqlalchemy.engine.Engine SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
INFO:sqlalchemy.engine.Engine:SELECT sum([Bills].[TotalAmount]) AS sum_1 
FROM [Bills] 
WHERE [Bills].[BillDate] >= ? AND [Bills].[Status] = ?
2025-06-25 14:04:02,427 INFO sqlalchemy.engine.Engine [cached since 276.8s ago] (datetime.datetime(2025, 6, 1, 0, 0), '已结账')
INFO:sqlalchemy.engine.Engine:[cached since 276.8s ago] (datetime.datetime(2025, 6, 1, 0, 0), '已结账')
INFO:     127.0.0.1:61935 - "GET /dashboard/sales HTTP/1.1" 200 OK
2025-06-25 14:04:02,431 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:     127.0.0.1:61936 - "GET /dashboard/top-products?limit=5 HTTP/1.1" 200 OK
2025-06-25 14:04:02,435 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
2025-06-25 14:04:02,435 INFO sqlalchemy.engine.Engine BEGIN (implicit)
INFO:sqlalchemy.engine.Engine:BEGIN (implicit)
2025-06-25 14:04:02,439 INFO sqlalchemy.engine.Engine SELECT TOP 5 [Products].[Name] AS [Products_Name], sum([BillItems].[Quantity]) AS sales 
FROM [Products] JOIN [BillItems] ON [BillItems].[ProductID] = [Products].[ProductID] JOIN [Bills] ON [Bills].[BillID] = [BillItems].[BillID] 
WHERE [Bills].[Status] = ? GROUP BY [Products].[Name] ORDER BY sum([BillItems].[Quantity]) DESC
INFO:sqlalchemy.engine.Engine:SELECT TOP 5 [Products].[Name] AS [Products_Name], sum([BillItems].[Quantity]) AS sales 
FROM [Products] JOIN [BillItems] ON [BillItems].[ProductID] = [Products].[ProductID] JOIN [Bills] ON [Bills].[BillID] = [BillItems].[BillID] 
WHERE [Bills].[Status] = ? GROUP BY [Products].[Name] ORDER BY sum([BillItems].[Quantity]) DESC
2025-06-25 14:04:02,439 INFO sqlalchemy.engine.Engine [cached since 276.8s ago] ('已结账',)
INFO:sqlalchemy.engine.Engine:[cached since 276.8s ago] ('已结账',)
INFO:     127.0.0.1:61935 - "GET /dashboard/top-products?limit=5 HTTP/1.1" 200 OK
2025-06-25 14:04:02,439 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:sqlalchemy.engine.Engine:ROLLBACK
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [69260]
